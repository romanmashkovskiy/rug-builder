"use strict";function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),RugBuilder=function(){function e(t,o,r,i){var s;_classCallCheck(this,e),this.coloredStructureImages=!1,this.context=t,this.showSubmit=o,this.showRestart=r,this.showExit=i,this.imageContainer=document.querySelector("#hosp_builder_img-container"),this.structureCodes=["H1150","H1200","H1450","H2050","H2060","H2070","H2100","H2150","H2250","H2350","H2360","H2400","H2510","H2600","H3150","H3200","H3350","H3360","H3370","H3380","H3500","H3650","H3660","H3700","H3750","H3760","H3770","H4050","H4060","H4100","H4110","H4200","H4210","H4220","H4300","H4370","H4380","H4390","H4400","H5050"],this.colorCodes=["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","J40000","J70000","H70002","H70003","J70001","J70002","J70003"],this.structureColorCodes=(s={H1150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1450:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2070:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2100:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2250:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2350:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2400:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2510:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2600:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3350:["A10000","A40000","B10000","B10001","B40000","B70000","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3370:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3380:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3500:["A10000","A40000","B10000","B10001","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3650:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3660:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3700:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3750:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3760:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3770:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4100:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4110:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4210:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4220:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4300:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4370:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4380:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4390:["A10000","A40000","B10000","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4400:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"]},_defineProperty(s,"H4400",["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"]),_defineProperty(s,"H5050",["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"]),s),this.numStructureColors={H1150:1,H1200:1,H1450:1,H2050:1,H2060:1,H2070:1,H2100:1,H2150:1,H2250:1,H2350:1,H2360:1,H2510:1,H2600:1,H3750:1,H3150:2,H3200:2,H3350:2,H3360:2,H3370:2,H3380:2,H3500:2,H3650:2,H3660:2,H3700:2,H3760:2,H3770:2,H4100:2,H5050:2,H4050:3,H4060:3,H4110:3,H4200:3,H4300:3,H4400:3,H4210:4,H4220:4,H4380:6,H4370:8,H4390:7},this.structureImages={},this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.choices={structure:void 0,color1:void 0,color2:void 0,color3:void 0,color4:void 0,color5:void 0,color6:void 0,color7:void 0,color8:void 0,color9:void 0}}return _createClass(e,[{key:"startAgain",value:function(){this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],PubSub.publish("stageChange",0)}}]),e}();RugBuilder.prototype.start=function(){function e(){var e=t.btnExitComponent(),o=t.btnRestartComponent(),r=t.btnSubmitComponent(),i=t.btnStageComponent();t.menuComponent(e,o,r,i);var s=t.btnExpandCollapseComponent(),n=t.btnStructureComponent(),c=t.btnColorComponent();t.drawerComponent(s,n,c),t.calculateContainerHeight()}var t=rugBuilder;t.addDOMElements(),t.getStructuresData().then(function(){e()})},RugBuilder.prototype.getStructuresData=function(){return new Promise(function(e,t){for(var o=rugBuilder,r=0;r<o.structureCodes.length;r++){var i=o.structureCodes[r],s="https://d105txpzekqrfa.cloudfront.net/hospitality/structures/"+i+"/base-colour.jpg";o.structureImages[i]=s}var n=0;setInterval(function(){var t=o.structureCodes.length,r=0,i=void 0;for(i in o.structureImages)o.structureImages.hasOwnProperty(i)&&r++;if(t===r)return void e();n++},100)})},RugBuilder.prototype.ajax=function(e,t,o,r){var i=new XMLHttpRequest;void 0!==r&&(i.responseType=r),i.addEventListener("load",o),i.open(e,t),i.send()},RugBuilder.prototype.addDOMElements=function(e,t,o,r){var i={PROGRESS_MENU:document.createElement("div"),DRAWER:document.createElement("div"),IMG_CONTAINER:{CONTAINER:document.createElement("div"),ZERO:document.createElement("div"),ONE:document.createElement("div"),TWO:document.createElement("div"),THREE:document.createElement("div"),FOUR:document.createElement("div"),FIVE:document.createElement("div"),SIX:document.createElement("div"),SEVEN:document.createElement("div"),EIGHT:document.createElement("div"),NINE:document.createElement("div")},CHOICES:{CONTAINER:document.createElement("div"),ZERO:document.createElement("div"),ONE:document.createElement("div"),TWO:document.createElement("div"),THREE:document.createElement("div"),FOUR:document.createElement("div"),FIVE:document.createElement("div"),SIX:document.createElement("div"),SEVEN:document.createElement("div"),EIGHT:document.createElement("div"),NINE:document.createElement("div")},LITTLE_LOADER:document.createElement("div"),SUBMIT_SCREEN:document.createElement("div"),EMAIL_FORM:document.createElement("div")};if(i.PROGRESS_MENU.setAttribute("id","hosp_builder_progress-menu"),i.DRAWER.setAttribute("id","hosp_builder_drawer"),i.IMG_CONTAINER.CONTAINER.setAttribute("id","hosp_builder_img-container"),i.IMG_CONTAINER.ZERO.setAttribute("id","hosp_builder_color-0"),i.IMG_CONTAINER.ONE.setAttribute("id","hosp_builder_color-1"),i.IMG_CONTAINER.TWO.setAttribute("id","hosp_builder_color-2"),i.IMG_CONTAINER.THREE.setAttribute("id","hosp_builder_color-3"),i.IMG_CONTAINER.FOUR.setAttribute("id","hosp_builder_color-4"),i.IMG_CONTAINER.FIVE.setAttribute("id","hosp_builder_color-5"),i.IMG_CONTAINER.SIX.setAttribute("id","hosp_builder_color-6"),i.IMG_CONTAINER.SEVEN.setAttribute("id","hosp_builder_color-7"),i.IMG_CONTAINER.EIGHT.setAttribute("id","hosp_builder_color-8"),i.IMG_CONTAINER.NINE.setAttribute("id","hosp_builder_color-9"),i.CHOICES.CONTAINER.setAttribute("id","hosp_builder_choices"),i.CHOICES.ZERO.setAttribute("id","hosp_builder_choice-0"),i.CHOICES.ONE.setAttribute("id","hosp_builder_choice-1"),i.CHOICES.TWO.setAttribute("id","hosp_builder_choice-2"),i.CHOICES.THREE.setAttribute("id","hosp_builder_choice-3"),i.CHOICES.FOUR.setAttribute("id","hosp_builder_choice-4"),i.CHOICES.FIVE.setAttribute("id","hosp_builder_choice-5"),i.CHOICES.SIX.setAttribute("id","hosp_builder_choice-6"),i.CHOICES.SEVEN.setAttribute("id","hosp_builder_choice-7"),i.CHOICES.EIGHT.setAttribute("id","hosp_builder_choice-8"),i.CHOICES.NINE.setAttribute("id","hosp_builder_choice-9"),i.LITTLE_LOADER.setAttribute("id","hosp_builder_little-loader"),i.SUBMIT_SCREEN.setAttribute("id","hosp_builder_submit-screen"),i.EMAIL_FORM.setAttribute("id","hosp_builder_email-form"),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.ZERO),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.ONE),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.TWO),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.THREE),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.FOUR),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.FIVE),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.SIX),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.SEVEN),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.EIGHT),i.IMG_CONTAINER.CONTAINER.appendChild(i.IMG_CONTAINER.NINE),i.CHOICES.CONTAINER.appendChild(i.CHOICES.ZERO),i.CHOICES.CONTAINER.appendChild(i.CHOICES.ONE),i.CHOICES.CONTAINER.appendChild(i.CHOICES.TWO),i.CHOICES.CONTAINER.appendChild(i.CHOICES.THREE),i.CHOICES.CONTAINER.appendChild(i.CHOICES.FOUR),i.CHOICES.CONTAINER.appendChild(i.CHOICES.FIVE),i.CHOICES.CONTAINER.appendChild(i.CHOICES.SIX),i.CHOICES.CONTAINER.appendChild(i.CHOICES.SEVEN),i.CHOICES.CONTAINER.appendChild(i.CHOICES.EIGHT),i.CHOICES.CONTAINER.appendChild(i.CHOICES.NINE),null!==document.getElementById("hospitality-builder"))document.getElementById("hospitality-builder").appendChild(i.PROGRESS_MENU),document.getElementById("hospitality-builder").appendChild(i.DRAWER),document.getElementById("hospitality-builder").appendChild(i.IMG_CONTAINER.CONTAINER),document.getElementById("hospitality-builder").appendChild(i.CHOICES.CONTAINER),document.getElementById("hospitality-builder").appendChild(i.LITTLE_LOADER),document.getElementById("hospitality-builder").appendChild(i.SUBMIT_SCREEN);else{var s=document.createElement("div");s.setAttribute("id","hospitality-builder"),s.appendChild(i.PROGRESS_MENU),s.appendChild(i.DRAWER),s.appendChild(i.IMG_CONTAINER.CONTAINER),s.appendChild(i.CHOICES.CONTAINER),s.appendChild(i.LITTLE_LOADER),s.appendChild(i.SUBMIT_SCREEN),s.appendChild(i.EMAIL_FORM),document.body.appendChild(s)}},RugBuilder.prototype.calculateContainerHeight=function(){function e(){var e=document.getElementById("hosp_builder_drawer").offsetHeight+209;document.getElementById("hospitality-builder").style.minHeight=e+"px"}rugBuilder;setTimeout(e,100),window.onresize=e},RugBuilder.prototype.loadingScreens=function(e,t){return!0},RugBuilder.prototype.showLittleLoader=function(){return!0},RugBuilder.prototype.hideLittleLoader=function(){return!0},RugBuilder.prototype.emailForm=function(e){var t=(rugBuilder,React.createClass({displayName:"EmailForm",submit:function(){function t(e){document.querySelector("#hosp_builder_email-response").innerText="";var t=e.srcElement.responseText,o="";switch(t){case"invalid email":o="Sorry, your email is invalid. Please ensure you have typed it correctly and try again.";break;case"success":o="Thank you, an email detailing your selections has been received. You will hear from us shortly.";break;default:o="Sorry, an error has occured. Please try again."}document.querySelector("#hosp_builder_email-response").innerText=o}console.log("email form !!!!");var o=document.querySelector("#hosp_builder_email-submit").value,r=new XMLHttpRequest;r.addEventListener("load",t),console.log("send email request");var i="";i="localhost"===window.location.hostname?"http://localhost:8888/crucial-trading/":"vps.89hosting.co.uk"==window.location.hostname?"http://vps.89hosting.co.uk/~crucialtrading/":"http://www.crucial-trading.com/",i+="wp-json/api/v1/";var s=i+"email-hospitality-rug-choices";console.log("post url ---\x3e"),console.log(s),r.open("POST",s),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("choices="+JSON.stringify(e)+"&from="+o)},render:function(){return React.createElement("div",{className:"hosp_builder_email-form-container"},React.createElement("p",{id:"hosp_builder_email-response"}),React.createElement("input",{type:"email",placeholder:"Please enter your email",id:"hosp_builder_email-submit"}),React.createElement("button",{type:"button",onClick:this.submit},"Send"))}}));ReactDOM.render(React.createElement(t,null),document.querySelector("#hosp_builder_email-form"))},RugBuilder.prototype.imageChoiceComponent=function(e,t){var o=rugBuilder,r=React.createClass({displayName:"ImageChoiceComponent",render:function(){var r=void 0;return r=0===o.colorStage?"Pattern: "+e:"Colour "+o.colorStage+": "+e,React.createElement("span",null,React.createElement("p",null,r),React.createElement("img",{src:t,alt:e}))}}),i="#hosp_builder_choice-"+o.colorStage;ReactDOM.render(React.createElement(r,null),document.querySelector(i))},RugBuilder.prototype.imageComponent=function(e,t,o){var r=rugBuilder,i=React.createClass({displayName:"ImageComponent",render:function(){document.querySelector("#hosp_builder_img-container").classList.contains("hidden")&&document.querySelector("#hosp_builder_img-container").classList.remove("hidden");var o=function(e){},r=function(){};return React.createElement("img",{src:t,alt:e,onError:o,onLoad:r})}}),s="#hosp_builder_color-"+r.colorStage;ReactDOM.render(React.createElement(i,null),document.querySelector(s))},RugBuilder.prototype.submitScreenComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"SubmitScreenComponent",getInitialState:function(){return{structure:e.choices.structure,colour1:e.choices.color1,colour2:e.choices.color2,colour3:e.choices.color3,colour4:e.choices.color4,colour5:e.choices.color5,colour6:e.choices.color6,colour7:e.choices.color7,colour8:e.choices.color8,colour9:e.choices.color9}},email:function(){e.emailForm(this.state)},print:function(){window.print()},render:function(){var e=this,t="";Object.keys(this.state).map(function(o){void 0!==e.state[o]&&(t+=o,t+=": ",t+=e.state[o],t+=", ")});return React.createElement("div",{className:"hosp_builder_submit"},React.createElement("h3",null,"Your Rug"),React.createElement("a",{href:"#",onClick:this.email,className:"hosp_builder_email"},"Email"),React.createElement("a",{href:"#",onClick:this.print,className:"hosp_builder_print"},"Print"))}});ReactDOM.render(React.createElement(t,null),document.querySelector("#hosp_builder_submit-screen"))},RugBuilder.prototype.btnColorComponent=function(){var e=rugBuilder;return React.createClass({displayName:"BtnColorComponent",handleClick:function(t){t.preventDefault(),e.showLittleLoader();var o="https://d105txpzekqrfa.cloudfront.net/hospitality/colours/"+this.props.color+".jpg",r="https://d105txpzekqrfa.cloudfront.net/hospitality/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".png",i="https://d105txpzekqrfa.cloudfront.net/hospitality/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".jpg";e.imageComponent(this.props.color,r,i),e.imageChoiceComponent(this.props.color,o),this.props.onClick(this.props.color)},render:function(){var e="hosp_builder_page-"+this.props.page;this.props.page&&(this.props.page===this.props.pageInView-1?e+=" hosp_builder_left-of-window":this.props.page===this.props.pageInView+1?e+=" hosp_builder_right-of-window":this.props.page===this.props.pageInView?e+=" hosp_builder_in-window":e+=" hosp_builder_hidden");var t="https://d105txpzekqrfa.cloudfront.net/hospitality/colours/"+this.props.color+".jpg";return React.createElement("li",{className:e,"data-page":this.props.page},React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.color),React.createElement("img",{src:t,alt:this.props.color})))}})},RugBuilder.prototype.btnExpandCollapseComponent=function(){return React.createClass({displayName:"BtnExpandCollapseComponent",handleClick:function(e){e.preventDefault(),this.props.currentlyOpen?this.props.close():this.props.open()},render:function(){return React.createElement("a",{href:"#",className:"hosp_builder_expCol",onClick:this.handleClick},this.props.text)}})},RugBuilder.prototype.btnStructureComponent=function(){var e=rugBuilder;return React.createClass({displayName:"BtnStructureComponent",handleClick:function(t){t.preventDefault();for(var o=0;o<10;o++)ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_color-"+o)),ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_choice-"+o));e.imageComponent(this.props.code,this.props.jpg),e.imageChoiceComponent(this.props.code,this.props.img),this.props.onClick(this.props.code)},render:function(){var e="hosp_builder_page-"+this.props.page;return this.props.page===this.props.pageInView-1?e+=" hosp_builder_left-of-window":this.props.page===this.props.pageInView+1?e+=" hosp_builder_right-of-window":this.props.page===this.props.pageInView?e+=" hosp_builder_in-window":e+=" hosp_builder_hidden",React.createElement("li",{className:e,"data-page":this.props.page},React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.code),React.createElement("img",{src:this.props.img,alt:this.props.code})))}})},RugBuilder.prototype.drawerComponent=function(e,t,o){var r=rugBuilder,i=React.createClass({displayName:"DrawerComponent",getInitialState:function(){var e=r.structureImages,t=new Date,o=0,i=void 0;for(i in e)e.hasOwnProperty(i)&&o++;return{stage:"structures",timestamp:t,open:!0,text:"Collapse",pageInView:1,chosenStructure:void 0,chosenColors:[],_structures:e,_numStructures:o,_colors:void 0,_numColors:void 0,_resize:0}},STRUCTURE_ELEMS_PER_PAGE:void 0,STRUCTURE_NUM_OF_PAGES:void 0,STRUCTURE_TOP_CSS_AMOUNT:void 0,COLOR_ELEMS_PER_PAGE:void 0,COLOR_NUM_OF_PAGES:void 0,COLOR_TOP_CSS_AMOUNT:void 0,componentDidMount:function(){this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged),this.restart=PubSub.subscribe("restart",this.restart),this.submit=PubSub.subscribe("submit",this.submit),this.calcDrawerMaxHeight();var e=this,t=new Hammer(document.querySelector("ul.hosp_builder_structures")),o=new Hammer(document.querySelector("ul.hosp_builder_colors"));t.on("swipe",function(t){2===t.direction?e.slideLeft():e.slideRight()}),o.on("swipe",function(t){2===t.direction?e.slideLeft():e.slideRight()}),window.addEventListener("resize",this.windowResize)},componentWillUnmount:function(){PubSub.unsubscribe(this.stageChange),PubSub.unsubscribe(this.restart),PubSub.unsubscribe(this.submit)},windowResize:function(){this.STRUCTURE_ELEMS_PER_PAGE=void 0,this.COLOR_ELEMS_PER_PAGE=void 0,this.calcDrawerMaxHeight(),this.setState(function(e){return{_resize:e._resize+1}})},calcDrawerMaxHeight:function(){var e=void 0;e=document.querySelector(".hosp_builder_drawer__content").classList.contains("structures")?document.querySelector(".hosp_builder_structures"):document.querySelector(".hosp_builder_colors");var t=document.querySelector(".hosp_builder_drawer__content"),o=window.getComputedStyle(e).getPropertyValue("height");t.style.maxHeight=o,document.querySelector("#hosp_builder_drawer").style.maxHeight=o},open:function(){document.querySelector("ul.hosp_builder_structures").classList.remove("hosp_builder_closed"),document.querySelector("ul.hosp_builder_colors").classList.remove("hosp_builder_closed"),document.querySelector("ul.hosp_builder_structures").classList.add("hosp_builder_opening"),document.querySelector("ul.hosp_builder_colors").classList.add("hosp_builder_opening"),setTimeout(function(){document.querySelector("ul.hosp_builder_structures").classList.remove("hosp_builder_opening"),document.querySelector("ul.hosp_builder_colors").classList.remove("hosp_builder_opening"),document.querySelector("ul.hosp_builder_structures").classList.add("hosp_builder_open"),document.querySelector("ul.hosp_builder_colors").classList.add("hosp_builder_open")},650),this.setState({open:!0,text:"Collapse"})},close:function(){document.querySelector("ul.hosp_builder_structures").classList.remove("hosp_builder_open"),document.querySelector("ul.hosp_builder_colors").classList.remove("hosp_builder_open"),document.querySelector("ul.hosp_builder_structures").classList.add("hosp_builder_closed"),document.querySelector("ul.hosp_builder_colors").classList.add("hosp_builder_closed"),this.setState({open:!1,text:"Expand"})},restart:function(){for(var e=0;e<10;e++)ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_color-"+e)),ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_choice-"+e));document.querySelector("#hosp_builder_img-container").style.zIndex=0,document.querySelector("#hosp_builder_choices").style.zIndex=0,this.updateDrawer(0),PubSub.publish("newStage",0),r.colorStage=0,r.choices.structure=void 0,r.choices.color1=void 0,r.choices.color2=void 0,r.choices.color3=void 0,r.choices.color4=void 0,r.choices.color5=void 0,r.choices.color6=void 0,r.choices.color7=void 0,r.choices.color8=void 0,r.choices.color9=void 0;var t=new Date;this.STRUCTURE_ELEMS_PER_PAGE=void 0,this.STRUCTURE_NUM_OF_PAGES=void 0,this.STRUCTURE_TOP_CSS_AMOUNT=void 0,this.COLOR_ELEMS_PER_PAGE=void 0,this.COLOR_NUM_OF_PAGES=void 0,this.COLOR_TOP_CSS_AMOUNT=void 0,this.setState({stage:"structures",timestamp:t,open:!0,text:"Collapse",chosenStructure:void 0,chosenColors:[],drawerSize:2,_colors:void 0,_numColors:void 0})},submit:function(){r.choices.structure=this.state.chosenStructure,r.choices.color1=this.state.chosenColors[0],r.choices.color2=this.state.chosenColors[1],r.choices.color3=this.state.chosenColors[2],r.choices.color4=this.state.chosenColors[3],
r.choices.color5=this.state.chosenColors[4],r.choices.color6=this.state.chosenColors[5],r.choices.color7=this.state.chosenColors[6],r.choices.color8=this.state.chosenColors[7],r.choices.color9=this.state.chosenColors[8]},slideLeft:function(e){e.preventDefault();var t="structures"===this.state.stage?this.STRUCTURE_NUM_OF_PAGES:this.COLOR_NUM_OF_PAGES;if(this.state.pageInView!==t){var o=[];o.forEach.call(document.querySelectorAll("li.hosp_builder_in-window"),function(e,t){e.classList.add("hosp_builder_moving-out-to-left")}),o.forEach.call(document.querySelectorAll("li.hosp_builder_right-of-window"),function(e,t){e.classList.add("hosp_builder_moving-in-from-right")});var r=this,i=this.state.pageInView,s=i+1;setTimeout(function(){r.setState({pageInView:s})},650)}},slideRight:function(e){if(e.preventDefault(),1!==this.state.pageInView){var t=[];t.forEach.call(document.querySelectorAll("li.hosp_builder_in-window"),function(e,t){e.classList.add("hosp_builder_moving-out-to-right")}),t.forEach.call(document.querySelectorAll("li.hosp_builder_left-of-window"),function(e,t){e.classList.add("hosp_builder_moving-in-from-left")});var o=this,r=this.state.pageInView,i=r-1;setTimeout(function(){o.setState({pageInView:i})},650)}},stageHasChanged:function(e,t){this.open(),this.updateDrawer(t),this.setState({pageInView:1})},updateDrawer:function(e){var t=void 0;switch(e){case 0:t="structures";break;default:t="colors"}this.setState({stage:t})},updateStructure:function(e){r.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],r.choices.structure=e;var t=0,o=void 0;for(o in r.structureColorCodes[e])r.structureColorCodes[e].hasOwnProperty(o)&&t++;this.setState({_colors:r.structureColorCodes[e],_numOfColors:t,chosenStructure:e,chosenColors:[],drawerSize:1}),PubSub.publish("newStructure",e)},updateColor:function(e){r.choices["color"+r.colorStage]=e,this.state.chosenColors[r.colorStage-1]=e,this.setState({drawerSize:1}),PubSub.publish("newColor",!0)},scrollToPage:function(e){},render:function(){var r=this,i=void 0,s=void 0,n=void 0,c=void 0,l=void 0;if("structures"===this.state.stage){if(void 0===this.STRUCTURE_ELEMS_PER_PAGE){var a=window.innerHeight,u=a-document.querySelector(".hosp_builder_progress-menu__container").offsetHeight-100,d=Math.floor(u/157)-1,p=window.innerWidth>992?4:3;this.STRUCTURE_ELEMS_PER_PAGE=d*p,this.STRUCTURE_NUM_OF_PAGES=Math.ceil(this.state._numStructures/this.STRUCTURE_ELEMS_PER_PAGE),this.STRUCTURE_TOP_CSS_AMOUNT=157*d}i=Object.keys(this.state._structures).map(function(e,o){var i=o+1,s=Math.ceil(i/r.STRUCTURE_ELEMS_PER_PAGE),n=r.state._structures[e],c="https://d105txpzekqrfa.cloudfront.net/hospitality/structures/"+e+"/base.jpg";return React.createElement(t,{key:o,code:e,img:n,jpg:c,page:s,pageInView:r.state.pageInView,onClick:r.updateStructure})});var h=".hosp_builder_drawer__content ul.hosp_builder_structures li.hosp_builder_right-of-window, .hosp_builder_drawer__content ul.hosp_builder_structures li.hosp_builder_moving-out-to-right { top: -"+this.STRUCTURE_TOP_CSS_AMOUNT+"px }";s=React.createElement("style",null,h);var E=1===this.state.pageInView?{color:"#A8A8A8"}:{},_=this.state.pageInView===this.STRUCTURE_NUM_OF_PAGES?{color:"#A8A8A8"}:{};l=React.createElement("div",{className:"hosp_builder_scroll-btns clearfix"},React.createElement("div",{className:"hosp_builder_scroll__left"},React.createElement("a",{href:"#",onClick:this.slideRight,style:E},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110134436/arrow-left.svg",alt:"Scroll Left",className:"scroller_btn"}))),React.createElement("div",{className:"hosp_builder_scroll__right"},React.createElement("a",{href:"#",onClick:this.slideLeft,style:_},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110134433/arrow-right.svg",alt:"Scroll Right",className:"scroller_btn"}))))}else if("colors"===this.state.stage){if(void 0===this.COLOR_ELEMS_PER_PAGE){var m=window.innerWidth,C=m>768?10:5,H=(m-50)/C;this.COLOR_ELEMS_PER_PAGE=m>768?20:10,this.COLOR_NUM_OF_PAGES=m>768?2:4,this.COLOR_TOP_CSS_AMOUNT=2*H+58}n=this.state._colors.map(function(e,t){var i=1;return i=window.innerWidth>768?t<20?1:2:t<10?1:t>9&&t<20?2:t>9&&t<20?3:4,React.createElement(o,{key:t,color:e,structure:r.state.chosenStructure,page:i,pageInView:r.state.pageInView,onClick:r.updateColor})});var b=".hosp_builder_drawer__content ul.hosp_builder_colors li.hosp_builder_right-of-window, .hosp_builder_drawer__content ul.hosp_builder_colors li.hosp_builder_moving-out-to-right { top: -"+this.COLOR_TOP_CSS_AMOUNT+"px }";c=React.createElement("style",null,b);var g=1===this.state.pageInView?{color:"#A8A8A8"}:{},R=this.state.pageInView===this.COLOR_NUM_OF_PAGES?{color:"#A8A8A8"}:{};l=React.createElement("div",{className:"hosp_builder_scroll-btns clearfix"},React.createElement("div",{className:"hosp_builder_scroll__left"},React.createElement("a",{href:"#",onClick:this.slideRight,style:g},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110134436/arrow-left.svg",alt:"Scroll Left",className:"scroller_btn"}))),React.createElement("div",{className:"hosp_builder_scroll__right"},React.createElement("a",{href:"#",onClick:this.slideLeft,style:R},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110134433/arrow-right.svg",alt:"Scroll Right",className:"scroller_btn"}))))}for(var S=this.state.open?"hosp_builder_open":"hosp_builder_closed",B="hosp_builder_drawer__content "+S+" "+this.state.stage,A="structures"===this.state.stage?this.STRUCTURE_NUM_OF_PAGES:this.COLOR_NUM_OF_PAGES,f=[],D=0;D<A;D++)!function(e){var t=e+1,o="hosp_builder_dot";r.state.pageInView===t&&(o+=" hosp_builder_active"),f.push(React.createElement("div",{className:o,"data-page":t,onClick:function(){return r.scrollToPage(t)}}))}(D);var N=React.createElement("div",{className:"hosp_builder_dots clearfix"},f);return React.createElement("div",{className:"hosp_builder_react-container hosp_builder_drawer__container",key:this.state.timestamp},React.createElement("div",{className:B},React.createElement("div",{className:"hosp_builder_drawer__content"},React.createElement("ul",{className:"clearfix hosp_builder_structures hosp_builder_open"},i),React.createElement("ul",{className:"clearfix hosp_builder_colors hosp_builder_open"},n)),l,N),React.createElement(e,{currentlyOpen:this.state.open,text:this.state.text,open:this.open,close:this.close}),s,c)}});ReactDOM.render(React.createElement(i,null),document.querySelector("#hosp_builder_drawer"))},RugBuilder.prototype.btnExitComponent=function(){var e=rugBuilder;return React.createClass({displayName:"BtnExitComponent",render:function(){if(e.showExit){var t=window.location.origin;return React.createElement("a",{href:t,className:"hosp_builder_progress-menu__exit nav-upper-link"},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110133952/exit.svg"}),"Exit")}return React.createElement("span",null)}})},RugBuilder.prototype.btnRestartComponent=function(){var e=rugBuilder;return React.createClass({displayName:"BtnRestartComponent",restart:function(e){e.preventDefault(),ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_submit-screen")),ReactDOM.unmountComponentAtNode(document.querySelector("#hosp_builder_email-form")),PubSub.publish("restart",!0)},render:function(){if(e.showRestart){return React.createElement("a",{href:"#",className:"hosp_builder_progress-menu__restart nav-upper-link",onClick:this.restart},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110133914/restart.svg"}),"Start Again")}return React.createElement("span",null)}})},RugBuilder.prototype.btnStageComponent=function(){var e=rugBuilder;return React.createClass({displayName:"BtnStageComponent",handleClick:function(t){t.preventDefault();var o=e.colorStage,r=this.props.index;if(o+1===r)e.colorStage=e.colorStage+1;else if(o-1===r)e.colorStage=e.colorStage-1;else{var i=!1;if(e.stageVisited[r]?i=!0:e.stageVisited[r-1]&&(i=!0),!i)return;e.colorStage=r}e.stageVisited[r]=!0,PubSub.publish("newStage",r)},render:function(){var t=e.colorStage,o="";this.props.index===t&&(o="hosp_builder_active");var r="hosp_builder_progress-menu__stage "+o;return React.createElement("li",{className:r},React.createElement("a",{href:"#",className:"hosp_builder_progress-menu__stage__link",onClick:this.handleClick},this.props.stage))}})},RugBuilder.prototype.btnSubmitComponent=function(){var e=rugBuilder;return React.createClass({displayName:"SubmitBtnComponent",submit:function(t){t.preventDefault(),document.querySelector("#hosp_builder_img-container").style.zIndex=11,document.querySelector("#hosp_builder_choices").style.zIndex=11,PubSub.publish("submit",!0),e.submitScreenComponent()},render:function(){if(e.showSubmit){return React.createElement("a",{href:"#",className:"hosp_builder_progress-menu__submit nav-upper-link",onClick:this.submit},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110133914/restart.svg"}),"Submit")}return React.createElement("span",null)}})},RugBuilder.prototype.menuComponent=function(e,t,o,r){var i=rugBuilder,s=React.createClass({displayName:"MenuComponent",getInitialState:function(){return{stages:["Structure"],showSubmit:!1}},componentDidMount:function(){this.structureChange=PubSub.subscribe("newStructure",this.structureHasChanged),this.colorChange=PubSub.subscribe("newColor",this.colorHasChanged),this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged)},componentWillUnmount:function(){PubSub.unsubscribe(this.structureChange),PubSub.unsubscribe(this.colorChange),PubSub.unsubscribe(this.stageChange)},structureHasChanged:function(e,t){for(var o=i.numStructureColors[t],r=["Structure"],s=0;s<o;s++){var n=s+1;r.push("Colour "+n)}this.setState({stages:r,showSubmit:!1})},colorHasChanged:function(){i.colorStage>0&&i.colorStage===this.state.stages.length-1?this.setState({showSubmit:!0}):i.stageVisited[this.state.stages.length-1]?this.setState({showSubmit:!0}):this.setState({showSubmit:!1})},stageHasChanged:function(e,t){var o=this;0===t?this.setState({stages:["Structure"],showSubmit:!1},function(){o.forceUpdate()}):this.forceUpdate()},render:function(){var i=this.state.stages,s=i.map(function(e,t){return React.createElement(r,{stage:e,key:t,index:t})}),n=void 0;n=this.state.showSubmit?React.createElement(o,null):"";return React.createElement("div",{className:"hosp_builder_progress-menu__container"},React.createElement("div",{className:"hosp_builder_progress-menu__top"},React.createElement("img",{src:"https://d105txpzekqrfa.cloudfront.net/uploads/20170110114837/logo-1.png",alt:"Crucial Trading Rug Builder"}),n,React.createElement(t,null),React.createElement(e,null)),React.createElement("div",{className:"hosp_builder_progress-menu__bottom"},React.createElement("ul",{className:"hosp_builder_progress-menu__stages"},s)))}});ReactDOM.render(React.createElement(s,null),document.querySelector("#hosp_builder_progress-menu"))};
//# sourceMappingURL=maps/hospitality-builder.min.js.map
