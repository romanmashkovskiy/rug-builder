"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),RugBuilder=function(){function e(t){_classCallCheck(this,e),this.coloredStructureImages=!1,this.context=t,this.imageContainer=document.querySelector("#img-container"),this.structureCodes=["H1150","H1200","H1450","H2050","H2060","H2070","H2100","H2150","H2250","H2360","H2400","H2510","H2600","H3150","H3200","H3350","H3360","H3380","H3500","H3650","H3660","H3700","H3750","H3760","H3770","H4050","H4060","H4200","H4210","H4220","H4300","H4350","H4390"],this.colorCodes=["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","J40000","J70000","H70002","H70003","J70001","J70002","J70003"],this.structureColorCodes={H1150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1450:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2070:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2100:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2250:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2400:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2510:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2600:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3350:["A10000","A40000","B10000","B10001","B40000","B70000","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3380:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3500:["A10000","A40000","B10000","B10001","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3650:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3660:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3700:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3750:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3760:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3770:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4210:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4220:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4300:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4350:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4390:["A10000","A40000","B10000","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"]},this.numStructureColors={H1150:1,H1200:1,H1450:1,H2050:1,H2060:1,H2070:1,H2100:1,H2150:1,H2250:1,H2360:1,H2510:1,H2600:1,H3750:1,H2350:2,H3150:2,H3200:2,H3350:2,H3360:2,H3370:2,H3380:2,H3500:2,H3650:2,H3660:2,H3700:2,H3760:2,H3770:2,H4100:2,H5050:2,H4050:3,H4060:3,H4110:3,H4200:3,H4300:3,H4400:3,H4210:4,H4220:4,H4350:6,H4380:6,H4370:8,H4390:7},this.structureImages={},this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1]}return _createClass(e,[{key:"startAgain",value:function(){this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],PubSub.publish("stageChange",0)}}]),e}();RugBuilder.prototype.start=function(){function e(){var e=t.btnExitComponent(),r=t.btnRestartComponent(),o=t.btnStageComponent();t.menuComponent(e,r,o);var a=t.btnExpandCollapseComponent(),s=t.btnStructureComponent(),n=t.btnColorComponent();t.drawerComponent(a,s,n),t.hideLittleLoader()}var t=rugBuilder;t.showLittleLoader(),t.getStructuresData().then(function(){e()})},RugBuilder.prototype.getStructuresData=function(){return new Promise(function(e,t){for(var r=rugBuilder,o=0;o<r.structureCodes.length;o++){var a=r.structureCodes[o],s=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+a+"/base-colour.jpg";r.structureImages[a]=s}var n=0;setInterval(function(){var t=r.structureCodes.length,o=0,a=void 0;for(a in r.structureImages)r.structureImages.hasOwnProperty(a)&&o++;return t===o?void e():void n++},100)})},RugBuilder.prototype.ajax=function(e,t,r,o){var a=new XMLHttpRequest;void 0!==o&&(a.responseType=o),a.addEventListener("load",r),a.open(e,t),a.send()},RugBuilder.prototype.loadingScreens=function(e,t){var r=void 0;switch(e){case"full":r="#full-loading";break;case"drawer":r="#drawer-loading";break;case"canvas":r="#canvas-loading"}var o="open"===t?99999:-99999;document.querySelector(r).style.zIndex=o},RugBuilder.prototype.showLittleLoader=function(){document.querySelector("#little-loader").style.display="block"},RugBuilder.prototype.hideLittleLoader=function(){document.querySelector("#little-loader").style.display="none"},RugBuilder.prototype.imageComponent=function(e,t,r){var o=rugBuilder,a=React.createClass({displayName:"ImageComponent",render:function(){var a=function(e){e.target.src=r},s=function(){o.hideLittleLoader()};return React.createElement("img",{src:t,alt:e,onError:a,onLoad:s})}}),s="#color-"+o.colorStage;ReactDOM.render(React.createElement(a,null),document.querySelector(s))},RugBuilder.prototype.btnColorComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnColorComponent",handleClick:function(){e.showLittleLoader();var t=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".png",r=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".jpg";e.imageComponent(this.props.color,t,r),this.props.onClick(this.props.color)},render:function(){var e=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/flat-colors/"+this.props.color+".jpg";return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:e,alt:this.props.color})))}});return t},RugBuilder.prototype.btnExpandCollapseComponent=function(){var e=React.createClass({displayName:"BtnExpandCollapseComponent",handleClick:function(){this.props.currentState.open?this.props.onUpdate(!0):"colors"===this.props.currentState.stage&&this.props.currentState.chosenColors.length>0||"structures"===this.props.currentState.stage&&void 0!==this.props.currentState.chosenStructure?this.props.onUpdate("kinda"):this.props.onUpdate(!1)},render:function(){return React.createElement("a",{href:"#",className:"expCol",onClick:this.handleClick},this.props.currentState.text)}});return e},RugBuilder.prototype.btnStructureComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStructureComponent",handleClick:function(){e.imageComponent(this.props.code,this.props.jpg),this.props.onClick(this.props.code)},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.code),React.createElement("img",{src:this.props.img,alt:this.props.code})))}});return t},RugBuilder.prototype.drawerComponent=function(e,t,r){var o=rugBuilder,a=React.createClass({displayName:"DrawerComponent",getInitialState:function(){var e=o.structureImages,t=0,r=void 0;for(r in e)e.hasOwnProperty(r)&&t++;var a=Math.floor(t/8);return t%8===0&&(a-=1),{stage:"structures",open:!0,text:"Collapse",chosenStructure:void 0,chosenColors:[],_structures:e,_colors:void 0,currentScroll:0,maxScrollStructures:a,maxScrollColors:0}},componentDidMount:function(){this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged)},componentWillUnmount:function(){PubSub.unsubscribe(this.stageChange)},updateOpenState:function(e){var t=document.querySelector("#drawer");if(e===!0){var r=t.offsetHeight;t.style.marginTop="-"+r+"px",this.setState({open:!1,text:"Expand"})}else"kinda"===e?(t.style.marginTop=0,this.setState({open:"kinda",text:"Collapse"})):(t.style.marginTop=0,this.setState({open:!0,text:"Collapse"}))},stageHasChanged:function(e){var t=[],r=[];t.forEach.call(document.querySelectorAll("ul.structures li"),function(e,t){void 0!==e&&(e.style.marginTop=0)}),r.forEach.call(document.querySelectorAll("ul.colors li"),function(e,t){void 0!==e&&(e.style.marginTop=0)}),document.querySelector("ul.structures").style.height="auto",document.querySelector("ul.structures").style.overflow="initial",document.querySelector("ul.colors").style.height="auto",document.querySelector("ul.colors").style.overflow="initial",this.updateDrawer(e),this.updateOpenState(!1),this.setState({currentScroll:0})},updateDrawer:function(e){var t=void 0;switch(e){case 0:t="structures";break;default:t="colors"}this.setState({stage:t})},updateStructure:function(e){this.state.maxScrollStructures>0&&(document.querySelector("ul.structures").style.height="289px",document.querySelector("ul.structures").style.overflow="hidden",this.updateOpenState("kinda"));for(var t=1;t<10;t++)ReactDOM.unmountComponentAtNode(document.querySelector("#color-"+t));o.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1];var r=Math.floor(o.structureColorCodes[e].length/20);o.structureColorCodes[e]%20===0&&(r-=1),this.setState({_colors:o.structureColorCodes[e],maxScrollColors:r,chosenStructure:e,chosenColors:[]}),PubSub.publish("newStructure",e)},updateColor:function(e){this.state.maxScrollColors>0&&(document.querySelector("ul.colors").style.height="243px",document.querySelector("ul.colors").style.overflow="hidden",this.updateOpenState("kinda")),this.state.chosenColors[o.colorStage-1]=e},scrollUp:function(){var e=this;if(0!==this.state.currentScroll){var t="colors"===this.state.stage?"ul.colors li":"ul.structures li",r=[];r.forEach.call(document.querySelectorAll(t),function(t,r){var o="colors"===e.state.stage?20:8,a="colors"===e.state.stage?21:9,s=void 0,n=void 0;if(n=o*e.state.currentScroll,s=n-a,r>s&&r<n){var c=parseInt(window.getComputedStyle(t).getPropertyValue("height")),l=parseInt(window.getComputedStyle(t).getPropertyValue("margin-top")),u=l+2*c;t.style.marginTop=u+"px"}});var o=this.state.currentScroll-1;this.setState({currentScroll:o})}},scrollDown:function(){var e=this;if(!("structures"===this.state.stage&&this.state.currentScroll===this.state.maxScrollStructures||"colors"===this.state.stage&&this.state.currentScroll===this.state.maxScrollColors)){var t="colors"===this.state.stage?"ul.colors li":"ul.structures li",r=[];r.forEach.call(document.querySelectorAll(t),function(t,r){var o="colors"===e.state.stage?20:8,a="colors"===e.state.stage?21:9,s=void 0,n=void 0;if(n=o*(e.state.currentScroll+1),s=n-a,r>s&&r<n){var c=parseInt(window.getComputedStyle(t).getPropertyValue("height")),l=parseInt(window.getComputedStyle(t).getPropertyValue("margin-top")),u=l-2*c;t.style.marginTop=u+"px"}});var o=this.state.currentScroll+1;this.setState({currentScroll:o})}},render:function(){var o=this,a=void 0,s=void 0,n=void 0;if("structures"===this.state.stage&&(a=Object.keys(this.state._structures).map(function(e,r){var a=o.state._structures[e],s=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+e+"/base.jpg";return React.createElement(t,{key:r,code:e,img:a,jpg:s,onClick:o.updateStructure})})),"colors"===this.state.stage&&(s=this.state._colors.map(function(e,t){return React.createElement(r,{key:t,color:e,structure:o.state.chosenStructure,onClick:o.updateColor})})),"kinda"===this.state.open){var c="colors"===this.state.stage?"maxScrollColors":"maxScrollStructures",l=0===this.state.currentScroll?{color:"#A8A8A8"}:{},u=this.state.currentScroll===this.state[c]?{color:"#A8A8A8"}:{};this.state[c]>0&&(n=React.createElement("div",{className:"scroll-btns clearfix"},React.createElement("div",{className:"scroll__up"},React.createElement("a",{href:"#",onClick:this.scrollUp,style:l},"▲")),React.createElement("div",{className:"scroll__down"},React.createElement("a",{href:"#",onClick:this.scrollDown,style:u},"▼"))))}var i=this.state.open?"open":"closed",H="drawer__content "+i+" "+this.state.stage;return React.createElement("div",{className:"react-container drawer__container"},React.createElement("div",{className:H},React.createElement("div",{className:"drawer__content"},React.createElement("ul",{className:"clearfix structures"},a),React.createElement("ul",{className:"clearfix colors"},s)),n),React.createElement(e,{onUpdate:this.updateOpenState,currentState:this.state}))}});ReactDOM.render(React.createElement(a,null),document.querySelector("#drawer"))},RugBuilder.prototype.btnExitComponent=function(){var e=React.createClass({displayName:"BtnExitComponent",render:function(){var e=templateDirectoryUri+"/rugbuilder/assets/icons/exit.svg",t=window.location.href;return React.createElement("a",{href:t,className:"progress-menu__exit"},React.createElement("img",{src:e}),"Exit")}});return e},RugBuilder.prototype.btnRestartComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnRestartComponent",restart:function(){e.updateStage(0),e.startAgain(),e.updateBorder("Single & Piping")},render:function(){var e=templateDirectoryUri+"/rugbuilder/assets/icons/restart.svg";return React.createElement("a",{href:"#",className:"progress-menu__restart",onClick:this.restart},React.createElement("img",{src:e}),"Start Again")}});return t},RugBuilder.prototype.btnStageComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStageComponent",handleClick:function(){var t=e.colorStage,r=this.props.index;if(t+1===r)e.colorStage=e.colorStage+1;else if(t-1===r)e.colorStage=e.colorStage-1;else{var o=!1;if(e.stageVisited[r]?o=!0:e.stageVisited[r-1]&&(o=!0),!o)return;e.colorStage=r}e.stageVisited[r]=!0,PubSub.publish("newStage",r)},render:function(){var t=e.colorStage,r="";this.props.index===t&&(r="active");var o="progress-menu__stage "+r;return React.createElement("li",{className:o},React.createElement("a",{href:"#",className:"progress-menu__stage__link",onClick:this.handleClick},this.props.stage))}});return t},RugBuilder.prototype.menuComponent=function(e,t,r){var o=rugBuilder,a=React.createClass({displayName:"MenuComponent",getInitialState:function(){return{stages:["Structure"]}},componentDidMount:function(){this.structureChange=PubSub.subscribe("newStructure",this.structureHasChanged),this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged)},componentWillUnmount:function(){PubSub.unsubscribe(this.structureChange),PubSub.unsubscribe(this.stageChange)},structureHasChanged:function(e){for(var t=o.numStructureColors[e],r=["Structure"],a=0;a<t;a++){var s=a+1;r.push("Colour "+s)}this.setState({stages:r})},stageHasChanged:function(e){this.forceUpdate()},render:function(){var t=this.state.stages,o=t.map(function(e,t){return React.createElement(r,{stage:e,key:t,index:t})}),a=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/logo.png";return React.createElement("div",{className:"progress-menu__container"},React.createElement("div",{className:"progress-menu__top"},React.createElement("img",{src:a,alt:"Crucial Trading Rug Builder"}),React.createElement(e,null)),React.createElement("div",{className:"progress-menu__bottom"},React.createElement("ul",{className:"progress-menu__stages"},o)))}});ReactDOM.render(React.createElement(a,null),document.querySelector("#progress-menu"))};
//# sourceMappingURL=maps/rugBuilder.min.js.map
