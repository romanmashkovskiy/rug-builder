"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),RugBuilder=function(){function e(t){_classCallCheck(this,e),this.coloredStructureImages=!1,this.context=t,this.imageContainer=document.querySelector("#img-container"),this.structureCodes=["H1150","H1200","H1450","H2050","H2060","H2070","H2100","H2150","H2250","H2350","H2360","H2400","H2510","H2600","H3150","H3200","H3350","H3360","H3380","H3500","H3650","H3660","H3700","H3750","H3760","H3770","H4050","H4060","H4200","H4210","H4220","H4300","H4350","H4390","H5050"],this.colorCodes=["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","J40000","J70000","H70002","H70003","J70001","J70002","J70003"],this.structureColorCodes={H1150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H1450:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2070:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70000","E70001","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2100:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2250:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2350:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2400:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2510:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H2600:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3150:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3350:["A10000","A40000","B10000","B10001","B40000","B70000","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3360:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3380:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3500:["A10000","A40000","B10000","B10001","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3650:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3660:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3700:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3750:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3760:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H3770:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4060:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4200:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4210:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4220:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4300:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4350:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H4390:["A10000","A40000","B10000","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"],H5050:["A10000","A40000","B10000","B10001","B40000","B70000","B70001","C40000","C40001","D10000","D40000","D70000","D70001","D70002","E40000","E40001","E70001","F40000","F70000","F70001","G40000","G70000","G70001","H10000","H40000","H70000","H70001","H70002","H70003","J40000","J70000","J70001","J70002","J70003"]},this.numStructureColors={H1150:1,H1200:1,H1450:1,H2050:1,H2060:1,H2070:1,H2100:1,H2150:1,H2250:1,H2350:1,H2360:1,H2510:1,H2600:1,H3750:1,H3150:2,H3200:2,H3350:2,H3360:2,H3370:2,H3380:2,H3500:2,H3650:2,H3660:2,H3700:2,H3760:2,H3770:2,H4100:2,H5050:2,H4050:3,H4060:3,H4110:3,H4200:3,H4300:3,H4400:3,H4210:4,H4220:4,H4350:6,H4380:6,H4370:8,H4390:7},this.structureImages={},this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.choices={structure:void 0,color1:void 0,color2:void 0,color3:void 0,color4:void 0,color5:void 0,color6:void 0,color7:void 0,color8:void 0,color9:void 0}}return _createClass(e,[{key:"startAgain",value:function(){this.colorStage=0,this.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],PubSub.publish("stageChange",0)}}]),e}();RugBuilder.prototype.start=function(){function e(){var e=t.btnExitComponent(),o=t.btnRestartComponent(),r=t.btnSubmitComponent(),s=t.btnStageComponent();t.menuComponent(e,o,r,s);var n=t.btnExpandCollapseComponent(),c=t.btnStructureComponent(),i=t.btnColorComponent();t.drawerComponent(n,c,i),t.hideLittleLoader()}var t=rugBuilder;t.showLittleLoader(),t.getStructuresData().then(function(){e()})},RugBuilder.prototype.getStructuresData=function(){return new Promise(function(e,t){for(var o=rugBuilder,r=0;r<o.structureCodes.length;r++){var s=o.structureCodes[r],n=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+s+"/base-colour.jpg";o.structureImages[s]=n}var c=0;setInterval(function(){var t=o.structureCodes.length,r=0,s=void 0;for(s in o.structureImages)o.structureImages.hasOwnProperty(s)&&r++;return t===r?void e():void c++},100)})},RugBuilder.prototype.ajax=function(e,t,o,r){var s=new XMLHttpRequest;void 0!==r&&(s.responseType=r),s.addEventListener("load",o),s.open(e,t),s.send()},RugBuilder.prototype.loadingScreens=function(e,t){var o=void 0;switch(e){case"full":o="#full-loading";break;case"drawer":o="#drawer-loading";break;case"canvas":o="#canvas-loading"}var r="open"===t?99999:-99999;document.querySelector(o).style.zIndex=r},RugBuilder.prototype.showLittleLoader=function(){document.querySelector("#little-loader").style.display="block",setTimeout(function(){document.querySelector("#little-loader p").style.display="block"},1e4)},RugBuilder.prototype.hideLittleLoader=function(){document.querySelector("#little-loader").style.display="none",document.querySelector("#little-loader p").style.display="none"},RugBuilder.prototype.imageChoiceComponent=function(e,t){var o=rugBuilder,r=React.createClass({displayName:"ImageChoiceComponent",render:function(){var r=void 0;return r=0===o.colorStage?"Pattern: "+e:"Colour "+o.colorStage+": "+e,React.createElement("span",null,React.createElement("p",null,r),React.createElement("img",{src:t,alt:e}))}}),s="#choice-"+o.colorStage;ReactDOM.render(React.createElement(r,null),document.querySelector(s))},RugBuilder.prototype.imageComponent=function(e,t,o){var r=rugBuilder,s=React.createClass({displayName:"ImageComponent",render:function(){var s=function(e){e.target.src=o},n=function(){r.hideLittleLoader()};return React.createElement("img",{src:t,alt:e,onError:s,onLoad:n})}}),n="#color-"+r.colorStage;ReactDOM.render(React.createElement(s,null),document.querySelector(n))},RugBuilder.prototype.submitScreenComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"SubmitScreenComponent",getInitialState:function(){return{structure:e.choices.structure,colour1:e.choices.color1,colour2:e.choices.color2,colour3:e.choices.color3,colour4:e.choices.color4,colour5:e.choices.color5,colour6:e.choices.color6,colour7:e.choices.color7,colour8:e.choices.color8,colour9:e.choices.color9}},print:function(){window.print()},render:function(){return React.createElement("div",{className:"submit"},React.createElement("h3",null,"Your Rug"),React.createElement("a",{href:"mailto:abc@123.xyz",className:"email"},"Email"),React.createElement("a",{href:"#",onclick:this.print,className:"print"},"Print"))}});ReactDOM.render(React.createElement(t,null),document.querySelector("#submit-screen"))},RugBuilder.prototype.btnColorComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnColorComponent",handleClick:function(){e.showLittleLoader();var t=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/flat-colors/"+this.props.color+".jpg",o=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".png",r=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+this.props.structure+"/"+this.props.color+"/colour-"+e.colorStage+".jpg";e.imageComponent(this.props.color,o,r),e.imageChoiceComponent(this.props.color,t),this.props.onClick(this.props.color)},render:function(){var e=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/flat-colors/"+this.props.color+".jpg";return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:e,alt:this.props.color})))}});return t},RugBuilder.prototype.btnExpandCollapseComponent=function(){var e=React.createClass({displayName:"BtnExpandCollapseComponent",handleClick:function(){this.props.currentlyOpen?this.props.close():this.props.open()},render:function(){return React.createElement("a",{href:"#",className:"expCol",onClick:this.handleClick},this.props.text)}});return e},RugBuilder.prototype.btnStructureComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStructureComponent",handleClick:function(){for(var t=0;t<10;t++)ReactDOM.unmountComponentAtNode(document.querySelector("#color-"+t)),ReactDOM.unmountComponentAtNode(document.querySelector("#choice-"+t));e.imageComponent(this.props.code,this.props.jpg),e.imageChoiceComponent(this.props.code,this.props.img),this.props.onClick(this.props.code)},render:function(){var e="page-"+this.props.page;return e+=this.props.page===this.props.pageInView-1?" left-of-window":this.props.page===this.props.pageInView+1?" right-of-window":this.props.page===this.props.pageInView?" in-window":" hidden",React.createElement("li",{className:e,"data-page":this.props.page},React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.code),React.createElement("img",{src:this.props.img,alt:this.props.code})))}});return t},RugBuilder.prototype.drawerComponent=function(e,t,o){var r=rugBuilder,s=React.createClass({displayName:"DrawerComponent",getInitialState:function(){var e=r.structureImages,t=new Date,o=0,s=void 0;for(s in e)e.hasOwnProperty(s)&&o++;var n=Math.floor(o/8);return o%8===0&&(n-=1),{stage:"structures",timestamp:t,open:!0,text:"Collapse",pageInView:1,chosenStructure:void 0,chosenColors:[],_structures:e,_numStructures:o,_colors:void 0,_numColors:void 0,_resize:0}},componentDidMount:function(){this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged),this.restart=PubSub.subscribe("restart",this.restart),this.submit=PubSub.subscribe("submit",this.submit),window.addEventListener("resize",this.resize);var e=this;setTimeout(function(){e.slideLeft()},5e3),setTimeout(function(){e.slideRight()},12500),setTimeout(function(){e.slideLeft()},15e3),setTimeout(function(){e.slideLeft()},17500),setTimeout(function(){e.slideRight()},2e4),setTimeout(function(){e.slideRight()},22500)},STRUCTURE_ELEMS_PER_PAGE:void 0,resize:function(){this.STRUCTURE_ELEMS_PER_PAGE=void 0,this.setState(function(e){return{_resize:e._resize+1}})},slideLeft:function(){document.querySelectorAll("li.in-window").forEach(function(e,t){e.classList.add("moving-out-to-left")}),document.querySelectorAll("li.right-of-window").forEach(function(e,t){e.classList.add("moving-in-from-right")});var e=this,t=this.state.pageInView,o=t+1;setTimeout(function(){e.setState({pageInView:o})},650)},slideRight:function(){document.querySelectorAll("li.in-window").forEach(function(e,t){e.classList.add("moving-out-to-right")}),document.querySelectorAll("li.left-of-window").forEach(function(e,t){e.classList.add("moving-in-from-left")});var e=this,t=this.state.pageInView,o=t-1;setTimeout(function(){e.setState({pageInView:o})},650)},componentWillUnmount:function(){PubSub.unsubscribe(this.stageChange),PubSub.unsubscribe(this.restart),PubSub.unsubscribe(this.submit)},open:function(){document.querySelector("ul.structures").style.height="auto",document.querySelector("ul.colors").style.height="auto",document.querySelector("ul.structures").style.padding="25px",document.querySelector("ul.colors").style.padding="25px",document.querySelector("ul.structures").style.overflow="initial",document.querySelector("ul.colors").style.overflow="initial",this.setState({open:!0,text:"Collapse"})},close:function(){document.querySelector("ul.structures").style.height="0px",document.querySelector("ul.colors").style.height="0px",document.querySelector("ul.structures").style.padding="0px",document.querySelector("ul.colors").style.padding="0px",document.querySelector("ul.structures").style.overflow="hidden",document.querySelector("ul.colors").style.overflow="hidden",this.setState({open:!1,text:"Expand"})},restart:function(){for(var e=this,t=0;t<10;t++)ReactDOM.unmountComponentAtNode(document.querySelector("#color-"+t)),ReactDOM.unmountComponentAtNode(document.querySelector("#choice-"+t));ReactDOM.unmountComponentAtNode(document.querySelector("#submit-screen")),document.querySelector("#img-container").style.zIndex=0,document.querySelector("#choices").style.zIndex=0,this.updateDrawer(0),PubSub.publish("newStage",0),r.colorStage=0,r.choices.structure=void 0,r.choices.color1=void 0,r.choices.color2=void 0,r.choices.color3=void 0,r.choices.color4=void 0,r.choices.color5=void 0,r.choices.color6=void 0,r.choices.color7=void 0,r.choices.color8=void 0,r.choices.color9=void 0;var o=new Date;this.setState({stage:"structures",timestamp:o,open:!0,text:"Collapse",chosenStructure:void 0,chosenColors:[],drawerSize:2,_colors:void 0,_numColors:void 0},function(){e.drawerHeight()})},submit:function(){r.choices.structure=this.state.chosenStructure,r.choices.color1=this.state.chosenColors[0],r.choices.color2=this.state.chosenColors[1],r.choices.color3=this.state.chosenColors[2],r.choices.color4=this.state.chosenColors[3],r.choices.color5=this.state.chosenColors[4],r.choices.color6=this.state.chosenColors[5],r.choices.color7=this.state.chosenColors[6],r.choices.color8=this.state.chosenColors[7],r.choices.color9=this.state.chosenColors[8]},stageHasChanged:function(e){this.open(),this.updateDrawer(e)},updateDrawer:function(e){var t=void 0;switch(e){case 0:t="structures";break;default:t="colors"}this.setState({stage:t})},updateStructure:function(e){var t=this;r.stageVisited=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.setState({_colors:r.structureColorCodes[e],chosenStructure:e,chosenColors:[],drawerSize:1},function(){t.drawerHeight()}),PubSub.publish("newStructure",e)},updateColor:function(e){var t=this;this.state.chosenColors[r.colorStage-1]=e,this.setState({drawerSize:1},function(){t.drawerHeight()}),PubSub.publish("newColor",!0)},render:function(){var r=this,s=void 0,n=void 0;if("structures"===this.state.stage){if(void 0===this.STRUCTURE_ELEMS_PER_PAGE){var c=window.innerHeight,i=c-document.querySelector(".progress-menu__container").offsetHeight-100,a=157,u=Math.floor(i/a),l=window.innerWidth>992?4:3;this.STRUCTURE_ELEMS_PER_PAGE=u*l}s=Object.keys(this.state._structures).map(function(e,o){var s=o+1,n=Math.ceil(s/r.STRUCTURE_ELEMS_PER_PAGE),c=r.state._structures[e],i=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/structures/"+e+"/base.jpg";return React.createElement(t,{key:o,code:e,img:c,jpg:i,page:n,pageInView:r.state.pageInView,onClick:r.updateStructure})})}else"colors"===this.state.stage&&(n=this.state._colors.map(function(e,t){return React.createElement(o,{key:t,color:e,structure:r.state.chosenStructure,onClick:r.updateColor})}));var H=this.state.open?"open":"closed",d="drawer__content "+H+" "+this.state.stage;return React.createElement("div",{className:"react-container drawer__container",key:this.state.timestamp},React.createElement("div",{className:d},React.createElement("div",{className:"drawer__content"},React.createElement("ul",{className:"clearfix structures"},s),React.createElement("ul",{className:"clearfix colors"},n))),React.createElement(e,{currentlyOpen:this.state.open,text:this.state.text,open:this.open,close:this.close}))}});ReactDOM.render(React.createElement(s,null),document.querySelector("#drawer"))},RugBuilder.prototype.btnExitComponent=function(){var e=React.createClass({displayName:"BtnExitComponent",render:function(){var e=templateDirectoryUri+"/rugbuilder/assets/icons/exit.svg",t=window.location.href;return React.createElement("a",{href:t,className:"progress-menu__exit"},React.createElement("img",{src:e}),"Exit")}});return e},RugBuilder.prototype.btnRestartComponent=function(){var e=(rugBuilder,React.createClass({displayName:"BtnRestartComponent",restart:function(){PubSub.publish("restart",!0)},render:function(){var e=templateDirectoryUri+"/rugbuilder/assets/icons/restart.svg";return React.createElement("a",{href:"#",className:"progress-menu__restart",onClick:this.restart},React.createElement("img",{src:e}),"Start Again")}}));return e},RugBuilder.prototype.btnStageComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStageComponent",handleClick:function(){var t=e.colorStage,o=this.props.index;if(t+1===o)e.colorStage=e.colorStage+1;else if(t-1===o)e.colorStage=e.colorStage-1;else{var r=!1;if(e.stageVisited[o]?r=!0:e.stageVisited[o-1]&&(r=!0),!r)return;e.colorStage=o}e.stageVisited[o]=!0,PubSub.publish("newStage",o)},render:function(){var t=e.colorStage,o="";this.props.index===t&&(o="active");var r="progress-menu__stage "+o;return React.createElement("li",{className:r},React.createElement("a",{href:"#",className:"progress-menu__stage__link",onClick:this.handleClick},this.props.stage))}});return t},RugBuilder.prototype.btnSubmitComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"SubmitBtnComponent",submit:function(){document.querySelector("#img-container").style.zIndex=11,document.querySelector("#choices").style.zIndex=11,PubSub.publish("submit",!0),e.submitScreenComponent()},render:function(){var e=templateDirectoryUri+"/rugbuilder/assets/icons/restart.svg";return React.createElement("a",{href:"#",className:"progress-menu__submit",onClick:this.submit},React.createElement("img",{src:e}),"Submit")}});return t},RugBuilder.prototype.menuComponent=function(e,t,o,r){var s=rugBuilder,n=React.createClass({displayName:"MenuComponent",getInitialState:function(){return{stages:["Structure"],showSubmit:!1}},componentDidMount:function(){this.structureChange=PubSub.subscribe("newStructure",this.structureHasChanged),this.colorChange=PubSub.subscribe("newColor",this.colorHasChanged),this.stageChange=PubSub.subscribe("newStage",this.stageHasChanged)},componentWillUnmount:function(){PubSub.unsubscribe(this.structureChange),PubSub.unsubscribe(this.colorChange),PubSub.unsubscribe(this.stageChange)},structureHasChanged:function(e){for(var t=s.numStructureColors[e],o=["Structure"],r=0;r<t;r++){var n=r+1;o.push("Colour "+n)}this.setState({stages:o,showSubmit:!1})},colorHasChanged:function(){s.colorStage>0&&s.colorStage===this.state.stages.length-1?this.setState({showSubmit:!0}):s.stageVisited[this.state.stages.length-1]?this.setState({showSubmit:!0}):this.setState({showSubmit:!1})},stageHasChanged:function(e){this.forceUpdate()},render:function(){var s=this.state.stages,n=s.map(function(e,t){return React.createElement(r,{stage:e,key:t,index:t})}),c=void 0;c=this.state.showSubmit?React.createElement(o,null):"";var i=templateDirectoryUri+"/rugbuilder-hospitality/assets/img/logo.png";return React.createElement("div",{className:"progress-menu__container"},React.createElement("div",{className:"progress-menu__top"},React.createElement("img",{src:i,alt:"Crucial Trading Rug Builder"}),c,React.createElement(t,null),React.createElement(e,null)),React.createElement("div",{className:"progress-menu__bottom"},React.createElement("ul",{className:"progress-menu__stages"},n)))}});ReactDOM.render(React.createElement(n,null),document.querySelector("#progress-menu"))};
//# sourceMappingURL=maps/rugBuilder.min.js.map
