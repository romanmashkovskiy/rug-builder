"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _loadFiles(e,t,r,n){return new Promise(function(a,o){function i(e){return function(r){var a=new THREE.MeshLambertMaterial({color:14540253}),o=new THREE.Mesh(r,a);o.name=e,s.push(o),t.json[n][e]=o}}for(var s=[],c=0;c<e.length;c++)if(void 0===t.json[n][e[c]]){var l=templateDirectoryUri+"/rugbuilder/json/"+r+"/"+e[c]+".json",d=e[c];(new THREE.BufferGeometryLoader).load(l,i(d))}else s.push(t.json[n][e[c]]);var u=setInterval(function(){e.length===s.length&&(a(),clearInterval(u))},100)})}function _updateScene(e,t){return new Promise(function(r,n){for(var a=e.scene.children.length,o=void 0,i=0;i<a;i++)if("Mesh"===e.scene.children[i].type){o=i;break}for(var s=0;s<a;s++)e.scene.remove(e.scene.children[o]);Object.keys(e.json[t]).forEach(function(r){e.scene.add(e.json[t][r]),void 0!==e.centerMaterial&&"center"===r&&(e.scene.children[e.scene.children.length-1].material=e.loadedTextures[e.centerMaterial])}),PubSub.publish("borderUpdate",t),r()})}function _createMaterialHTML(e,t){if(1!==e.state.stage){var r=e.state._materials;return"materials"===e.state.content?r.map(function(r,n){return React.createElement(t,{key:n,index:n,material:r.name,thumb:r.thumb,currentStage:e.state.stage,updateContent:e.updateContentState,updateMaterial:e.updateMaterialChoice})}):void 0}}function _createSidebarHTML(e,t,r){if(1!==e.state.stage){var n=e.state._materials;return"collections"===e.state.content&&"collections"===r?n.map(function(r,n){return React.createElement(t,{key:n,material:r.name,thumb:r.thumb,onUpdate:e.updateMaterialChoice})}):"swatches"===e.state.content&&"swatches"===r?n.map(function(r,n){return React.createElement(t,{key:n,material:r.name,thumb:r.thumb,updateContent:e.updateContentState,onUpdate:e.updateMaterialChoice})}):"swatchesSelected"===e.state.content&&"swatches--selected"===r?n.map(function(r,n){if(r.name===e.state.chosenMaterial)return React.createElement(t,{key:n,material:e.state.chosenMaterial,thumb:r.thumb})}):void 0}}function _createCollectionsHTML(e,t){if(0===e.state.stage){var r=e.state._collections,n=r[e.state.chosenMaterial];return"collections"===e.state.content?n.map(function(r,n){return React.createElement(t,{key:n,collection:r.name,updateContent:e.updateContentState,onUpdate:e.updateCollectionChoice})}):void 0}}function _createSwatchesHTML(e,t,r){if(1!==e.state.stage){var n=e.state._swatches,a=0===e.state.stage?n[e.state.chosenCollection]:n[e.state.chosenMaterial];if("swatches"===e.state.content&&"swatches"===r&&void 0!==a)return Object.keys(a).map(function(r,n){var o=a[r],i=o.name,s=o.code,c=o.thumb;return React.createElement(t,{key:n,swatch:i,thumb:c,code:s,updateContent:e.updateContentState,onUpdate:e.updateSwatchChoice})});if("swatchesSelected"===e.state.content&&"swatches--selected"===r){var o=function(){var r=e.state.chosenSwatch,n=0===e.state.stage?e.state._swatches[e.state.chosenCollection]:e.state._swatches[e.state.chosenMaterial],a=[],o=void 0,i=0;Object.keys(n).forEach(function(e){e===r&&(o=i),a[i]=n[e],i++});var s=[];if(o<=1){for(var c=0;c<o;c++)void 0!==a[c]&&s.push(a[c]);s.push(a[o]);for(var l=o+1;l<5;l++)void 0!==a[l]&&s.push(a[l])}else if(o>a.length-2){for(var d=o===a.length?2:1,u=2+d,h=o-u;h<o;h++)void 0!==a[h]&&s.push(a[h]);s.push(a[o]);for(var p=5-s.length,m=1+p,g=o+1;g<m;g++)void 0!==a[g]&&s.push(a[g])}else for(var b=o-2;b<o+3;b++)void 0!==a[b]&&s.push(a[b]);return{v:s.map(function(r,n){return React.createElement(t,{key:n,swatch:r.name,thumb:r.thumb,updateContent:e.updateContentState,onUpdate:e.updateSwatchChoice})})}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}}}function _createBorderHTML(e,t){if(1===e.state.stage&&"border"===e.state.content){var r=e.state._borders;return r.map(function(r,n){return React.createElement(t,{key:n,border:r,onUpdate:e.updateBorderChoice})})}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),RugBuilder=function(){function e(t){_classCallCheck(this,e),this.context=t,this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.currentStage=0,this.stages=["center","borderType","innerBorder","outerBorder","size"],this.stageVisited=[!0,!1,!1,!1,!1],this.WCmaterials=[],this.WCcollections=[],this.WCswatches={},this.WCborderMaterials=[],this.WCborderSwatches={},this.scene=void 0,this.renderer=void 0,this.camera=void 0,this.cameraOptions={aspectRatio:this.screenWidth/this.screenHeight,far:1e3,near:.1,viewAngle:90},this.helpers={axis:void 0,grid:void 0,spotLight:void 0},this.lights={},this.orbitControls=void 0,this.json={single:{"border-east":void 0,"border-north":void 0,"border-south":void 0,"border-west":void 0,center:void 0,stitches:void 0},double:{"border-inner-east":void 0,"border-inner-north":void 0,"border-inner-south":void 0,"border-inner-west":void 0,"border-outer-east":void 0,"border-outer-north":void 0,"border-outer-south":void 0,"border-outer-west":void 0,center:void 0,stitches:void 0},piping:{center:void 0,"border-east":void 0,"border-north":void 0,"border-south":void 0,"border-west":void 0,stitches:void 0,"trim-east":void 0,"trim-north":void 0,"trim-south":void 0,"trim-west":void 0}},this.loadedTextures={},this.borderType=void 0,this.centerMaterial=void 0,this.borderMaterials={single:void 0,piping:void 0,double:{inner:void 0,outer:void 0}},this.reactComponents={}}return _createClass(e,[{key:"nextStage",value:function(){var e=this.currentStage+1;if(e>4)throw new Error("Cannot go higher than stage 4");this.stageVisited[e]||(this.stageVisited[e]=!0),this.currentStage=e,PubSub.publish("stageChange",e)}},{key:"prevStage",value:function(){var e=this.currentStage-1;if(e<0)throw new Error("Cannot go lower than stage 0");this.currentStage=e,PubSub.publish("stageChange",e)}},{key:"updateStage",value:function(e){if(e<0||e>4)throw new Error("Stage must not be less than 0 or greater than 4");var t=!1;this.currentStage+1===e?t=!0:this.stageVisited[e]?t=!0:this.stageVisited[e-1]&&(t=!0),t&&(this.currentStage=e,PubSub.publish("stageChange",e))}},{key:"startAgain",value:function(){this.currentStage=0,this.stageVisited=[!0,!1,!1,!1,!1],this.json={single:{borderEast:void 0,borderNorth:void 0,borderSouth:void 0,borderWest:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0},piping:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0}},this.centerMaterial=void 0,this.loadedTextures={},this.materialChoice={single:{border:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0},piping:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0}},PubSub.publish("stageChange",0)}}]),e}();RugBuilder.prototype.start=function(){function e(){function e(){function e(){requestAnimationFrame(e),r.renderer.render(r.scene,r.camera)}r.initOrbit(),e()}var t=r.btnExitComponent(),n=r.btnRestartComponent(),a=r.btnStageComponent();r.menuComponent(t,n,a);var o=r.btnExpandCollapseComponent(),i=r.btnMaterialComponent(),s=r.btnCollectionComponent(),c=r.btnSwatchComponent(),l=r.btnBorderComponent(),d=r.sideMenuComponent();r.drawerComponent(o,i,s,c,d,l),r.initThree(),r.initLights(),r.initScene(),r.updateBorder("Single & Piping").then(function(){e()})}function t(e){var t=void 0;switch(e){case 0:t="materials";break;case 1:t="collections"}var r="Error at "+t+" stage.";alert(r)}var r=rugBuilder;r.getMaterialsData().then(function(){return r.getCollectionsData()}).then(function(){e()}).catch(function(e){t(e)})},RugBuilder.prototype.getMaterialsData=function(e){return new Promise(function(t,r){var n=rugBuilder,a=n.context;!function(){switch(a){case"website":var o=function(){200!==this.status&&r(0),"border"===e?n.WCborderMaterials=JSON.parse(this.response):n.WCmaterials=JSON.parse(this.response),t(!0)},i=function t(){var r=new XMLHttpRequest,n=window.location.href;"#"===n[n.length-1]&&(n=n.substr(0,n.length-1));var t="materials";"border"===e&&(t="border"),r.addEventListener("load",o),r.open("GET",n+"&request="+t),r.send()};i()}}()})},RugBuilder.prototype.getCollectionsData=function(){return new Promise(function(e,t){var r=rugBuilder,n=r.context;!function(){switch(n){case"website":var a=function(){200!==this.status&&t(1),r.WCcollections=JSON.parse(this.response),e(!0)},o=function(){var e=new XMLHttpRequest,t=window.location.href;"#"===t[t.length-1]&&(t=t.substr(0,t.length-1)),e.addEventListener("load",a),e.open("GET",t+"&request=collections"),e.send()};o()}}()})},RugBuilder.prototype.getSwatchData=function(e){return new Promise(function(t,r){var n=rugBuilder,a=n.context;!function(){switch(a){case"website":var o=function(){200!==this.status&&r(0),n.WCswatches=JSON.parse(this.response),t(JSON.parse(this.response))},i=function(){var t=new XMLHttpRequest,r=window.location.href;"#"===r[r.length-1]&&(r=r.substr(0,r.length-1)),t.addEventListener("load",o),t.open("GET",r+"&request=swatches&collection="+e),t.send()};i()}}()})},RugBuilder.prototype.initThree=function(){var e=rugBuilder,t=e.cameraOptions,r=new THREE.Scene,n=new THREE.WebGLRenderer,a=new THREE.PerspectiveCamera(t.viewAngle,t.aspectRatio,t.near,t.far);a.position.x=-58.25551669838936,a.position.y=103.7487525991614,a.position.z=132.44381733713013,a.rotation.x=-.6645005541912388,a.rotation.y=-.33334042300972533,a.rotation.z=-.25090904322969587,n.gammaInput=!0,n.gammaOutput=!0,n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(15987699),e.scene=r,e.renderer=n,e.camera=a},RugBuilder.prototype.displayTexture=function(e,t,r){if(1!==r&&4!==r){var n=rugBuilder,a=n.borderType,o=void 0,i=void 0,s=void 0,c=void 0;switch(r){case 0:o="centerMaterial",c=["center"];break;case 2:"single"===a?(o="borderMaterials",i="single",c=["border-east","border-north","border-south","border-west"]):"piping"===a?(o="borderMaterials",i="piping",c=["border-east","border-north","border-south","border-west","trim-east","trim-north","trim-south","trim-west"]):(o="borderMaterials",i="double",s="inner",c=["border-inner-east","border-inner-north","border-inner-south","border-inner-west"]);break;case 3:o="borderMaterials",i="double",s="outer",c=["border-outer-east","border-outer-north","border-outer-south","border-outer-west"]}return new Promise(function(r,a){if(void 0===n.loadedTextures[e])(new THREE.TextureLoader).load(t,function(t){t.wrapS=t.wrapT=THREE.RepeatWrapping,t.anisotropy=n.renderer.getMaxAnisotropy(),t.repeat.set(5,5);var r=new THREE.MeshPhongMaterial({map:t,color:16777215,shininess:5});n.loadedTextures[e]=r,void 0!==s?n[o][i][s]=e:void 0!==i?n[o][i]=e:n[o]=e;for(var a=0;a<n.scene.children.length;a++)c.indexOf(n.scene.children[a].name)>-1&&(n.scene.children[a].material=n.loadedTextures[e])});else{void 0!==s?n[o][i][s]=e:void 0!==i?n[o][i]=e:n[o]=e;for(var l=0;l<n.scene.children.length;l++)c.indexOf(n.scene.children[l].name)>-1&&(n.scene.children[l].material=n.loadedTextures[e])}})}},RugBuilder.prototype.updateBorder=function(e){var t=rugBuilder,r=[];return new Promise(function(n,a){switch(e){case"Single Border":r=["border-east","border-north","border-south","border-west","center","stitches"],t.borderType="single",_loadFiles(r,t,"single","single").then(function(){return _updateScene(t,"single")}).then(function(){n()}).catch(function(){alert("error loading border")});break;case"Single & Piping":r=["border-east","border-north","border-south","border-west","center","stitches","trim-east","trim-north","trim-south","trim-west"],t.borderType="piping",_loadFiles(r,t,"single","piping").then(function(){return _updateScene(t,"piping")}).then(function(){n()}).catch(function(){alert("error loading border")});break;case"Double Border":r=["border-inner-east","border-inner-north","border-inner-south","border-inner-west","border-outer-east","border-outer-north","border-outer-south","border-outer-west","center","stitches"],t.borderType="double",_loadFiles(r,t,"double","double").then(function(){return _updateScene(t,"double")}).then(function(){n()}).catch(function(){alert("error loading border")})}})},RugBuilder.prototype.initLights=function(e){var t=rugBuilder,r=new THREE.SpotLight(16777215,1,0,.3141592653589793,0,1),n=new THREE.SpotLight(16777215,.7,0,.3141592653589793,0,1),a=new THREE.AmbientLight(16777215),o=new THREE.DirectionalLight(16777215);r.position.set(216.55,238.95,-217.97),n.position.set(307.15,157.37,-80.38),o.position.set(0,0,1),t.lights.spotLight=r,t.lights.spotLight2=n,t.lights.ambientLight=a,t.lights.directionalLight=o},RugBuilder.prototype.initScene=function(){var e=rugBuilder;e.scene.add(e.camera),e.scene.add(e.lights.spotLight),e.scene.add(e.lights.spotLight),document.body.appendChild(e.renderer.domElement)},RugBuilder.prototype.initOrbit=function(){var e=rugBuilder;e.orbitControls=new THREE.OrbitControls(e.camera)},RugBuilder.prototype.btnBorderComponent=function(){var e=React.createClass({displayName:"BtnBorderComponent",handleClick:function(){this.props.onUpdate(this.props.border)},render:function(){var e=void 0;switch(this.props.border){case"Single Border":e="http://d105txpzekqrfa.cloudfront.net/uploads/2016/11/11174349/single-border-icon.svg";break;case"Single & Piping":e="http://d105txpzekqrfa.cloudfront.net/uploads/2016/11/11174352/single-piping-icon.svg";break;case"Double Border":e="http://d105txpzekqrfa.cloudfront.net/uploads/2016/11/11174338/double-border-icon.svg"}return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:e,alt:this.props.border}),React.createElement("h3",null,this.props.border)))}});return e},RugBuilder.prototype.btnCollectionComponent=function(){var e=React.createClass({displayName:"BtnCollectionComponent",handleClick:function(){this.props.updateContent("swatches"),this.props.onUpdate(this.props.collection.replace(/ /g,""))},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.collection)))}});return e},RugBuilder.prototype.btnExpandCollapseComponent=function(){var e=React.createClass({displayName:"BtnExpandCollapseComponent",handleClick:function(){this.props.currentState.open?this.props.onUpdate(!0):this.props.onUpdate(!1)},render:function(){return React.createElement("a",{href:"#",className:"expCol",onClick:this.handleClick},this.props.currentState.text)}});return e},RugBuilder.prototype.btnMaterialComponent=function(){var e=(rugBuilder,React.createClass({displayName:"BtnMaterialComponent",handleClick:function(){var e=void 0;0===this.props.currentStage?e="collections":2!==this.props.currentStage&&3!==this.props.currentStage||(e="swatches"),this.props.updateContent(e),this.props.updateMaterial(this.props.material)},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:this.props.thumb,alt:this.props.material}),React.createElement("h3",null,this.props.material)))}}));return e},RugBuilder.prototype.btnSwatchComponent=function(){var e=React.createClass({displayName:"BtnSwatchComponent",handleClick:function(){this.props.updateContent("swatchesSelected"),this.props.onUpdate(this.props.swatch.replace(/ /g,""),this.props.thumb)},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:this.props.thumb,alt:this.props.swatch}),React.createElement("h3",null,this.props.code)))}});return e},RugBuilder.prototype.drawerComponent=function(e,t,r,n,a,o){var i=rugBuilder,s=React.createClass({displayName:"DrawerComponent",getInitialState:function(){var e=i.WCmaterials,t=i.WCcollections;return{stage:i.currentStage,content:"materials",open:!1,text:"Expand",chosenMaterial:void 0,chosenCollection:void 0,chosenSwatch:void 0,chosenBorder:void 0,_materials:e,_collections:t,_swatches:{},_borders:["Single Border","Single & Piping","Double Border"]}},componentDidMount:function(){this.stageChange=PubSub.subscribe("stageChange",this.updateStageState)},componentWillUnmount:function(){PubSub.unsubscribe(this.stageChange)},updateStageState:function(e){this.setState({stage:e});var t=void 0;switch(e){case 0:t="materials",this.setState({_materials:i.WCmaterials,_collections:i.WCcollections,_swatches:{}});break;case 1:t="border";break;case 2:t="materials",0===i.WCborderMaterials.length?(this.setState({_materials:[],chosenMaterial:void 0,chosenCollection:void 0,chosenSwatch:void 0}),this.getBorderMaterials()):this.setState({_materials:i.WCborderMaterials});break;case 3:t="materials",this.setState({_materials:i.WCborderMaterials,chosenMaterial:void 0,chosenCollection:void 0,chosenSwatch:void 0});break;case 4:t=""}this.updateContentState(t)},getBorderMaterials:function(){var e=this;i.getMaterialsData("border").then(function(t){e.setState({_materials:i.WCborderMaterials})}).catch(function(){alert("Loading material error")})},updateOpenState:function(e){e?this.setState({open:!1,text:"Expand"}):this.setState({open:!0,text:"Collapse"})},updateContentState:function(e){this.setState({content:e})},updateMaterialChoice:function(e){var t=this;this.setState({chosenMaterial:e,chosenCollection:void 0}),2!==this.state.stage&&3!==this.state.stage||i.getSwatchData(e).then(function(r){t.state._swatches[e]=r,t.forceUpdate()})},updateCollectionChoice:function(e){var t=this;this.setState({chosenCollection:e}),i.getSwatchData(e).then(function(r){t.state._swatches[e]=r,t.forceUpdate()})},updateSwatchChoice:function(e,t){this.setState({chosenSwatch:e}),i.displayTexture(e,t,this.state.stage)},updateBorderChoice:function(e){this.setState({chosenBorder:e}),i.updateBorder(e)},createMaterialHTML:function(){return _createMaterialHTML(this,t)},createSidebarHTML:function(e){return _createSidebarHTML(this,a,e)},createCollectionsHTML:function(){return _createCollectionsHTML(this,r)},createSwatchesHTML:function(e){return _createSwatchesHTML(this,n,e)},createBorderHTML:function(){return _createBorderHTML(this,o)},render:function(){var t=this,r=t.createMaterialHTML(),n=function(e){return t.createSidebarHTML(e)},a=t.createCollectionsHTML(),o=function(e){return t.createSwatchesHTML(e)},i=t.createBorderHTML(),s=t.state.open?"open":"closed",c="drawer__content "+s+" "+this.state.content,l="drawer__content__material stage"+this.state.stage;return React.createElement("div",{className:"react-container drawer__container"},React.createElement("div",{className:c},React.createElement("div",{className:l},React.createElement("ul",null,r)),React.createElement("div",{className:"drawer__content__collections clearfix"},React.createElement("div",{className:"drawer__collections__sidebar"},React.createElement("ul",null,n("collections"))),React.createElement("div",{className:"drawer__collections__collections"},React.createElement("ul",{className:"clearfix"},a))),React.createElement("div",{className:"drawer__content__swatches clearfix"},React.createElement("div",{className:"drawer__swatches__sidebar"},React.createElement("ul",null,n("swatches"))),React.createElement("div",{className:"drawer__swatches__swatches"},React.createElement("ul",{className:"clearfix"},o("swatches")))),React.createElement("div",{className:"drawer__content__swatches--selected clearfix"},React.createElement("div",{className:"drawer__swatches--selected__sidebar"},React.createElement("ul",null,n("swatches--selected"))),React.createElement("div",{className:"drawer__swatches--selected__swatches"},React.createElement("ul",{className:"clearfix"},o("swatches--selected")))),React.createElement("div",{className:"drawer__content__border"},React.createElement("ul",null,i))),React.createElement(e,{onUpdate:this.updateOpenState,currentState:this.state}))}});ReactDOM.render(React.createElement(s,null),document.querySelector("#drawer"))},RugBuilder.prototype.sideMenuComponent=function(){var e=React.createClass({displayName:"SideMenuComponent",handleClick:function(){this.props.onUpdate(this.props.material),this.props.updateContent&&this.props.updateContent("collections")},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:this.props.thumb,alt:this.props.material}),React.createElement("h3",null,this.props.material)))}});return e},RugBuilder.prototype.btnExitComponent=function(){var e=React.createClass({displayName:"BtnExitComponent",render:function(){return React.createElement("a",{href:"http://localhost:8888/crucial-trading",className:"progress-menu__exit"},"Exit")}});return e},RugBuilder.prototype.btnRestartComponent=function(){var e=React.createClass({displayName:"BtnRestartComponent",render:function(){return React.createElement("a",{href:"#",className:"progress-menu__restart"},"Start Again")}});return e},RugBuilder.prototype.btnStageComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStageComponent",getInitialState:function(){return{marginLeft:0}},componentWillMount:function(){this.calcMargin(),window.addEventListener("resize",this.calcMargin)},handleClick:function(){var t=e.currentStage,r=this.props.index;t!==r&&(t+1===r?e.nextStage():t-1===r?e.prevStage():e.updateStage(r))},calcMargin:function(){if(!(this.props.index>0)){var t=window.innerWidth,r=e.currentStage;if(t>768||0===r)return void this.setState({marginLeft:0});var n=5*t*.16,a=t-n,o=a/2,i=n*r-o,s="-"+i+"px";this.setState({marginLeft:s})}},render:function(){var t=e.currentStage,r="";r=this.props.index===t?"active":this.props.index>t?"next":"prev";var n={marginLeft:this.state.marginLeft},a="progress-menu__stage "+r;return React.createElement("li",{className:a,style:n},React.createElement("a",{href:"#",className:"progress-menu__stage__link",onClick:this.handleClick},this.props.stage))}});return t},RugBuilder.prototype.menuComponent=function(e,t,r){var n=(rugBuilder,React.createClass({displayName:"MenuComponent",getInitialState:function(){return{stages:["Center","Border Type","Border","Rug Size"]}},componentDidMount:function(){this.stageChange=PubSub.subscribe("stageChange",this.stageHasChanged),this.borderChange=PubSub.subscribe("borderUpdate",this.borderHasChanged)},componentWillUnmount:function(){PubSub.unsubscribe(this.stageChange),PubSub.unsubscribe(this.borderChange)},stageHasChanged:function(){this.forceUpdate()},borderHasChanged:function(e){"single"===e||"piping"===e?this.setState({stages:["Center","Border Type","Border","Rug Size"]}):"double"===e&&this.setState({stages:["Center","Border Type","Inner Border","Outer Border","Rug Size"]})},render:function(){var n=this.state.stages,a=n.map(function(e,t){return React.createElement(r,{stage:e,key:t,index:t})});return React.createElement("div",{className:"progress-menu__container"},React.createElement("div",{className:"progress-menu__top"},React.createElement("img",{src:"assets/logo.png",alt:"Crucial Trading Rug Builder"}),React.createElement(t,null),React.createElement(e,null)),React.createElement("div",{className:"progress-menu__bottom"},React.createElement("ul",{className:"progress-menu__stages"},a)))}}));ReactDOM.render(React.createElement(n,null),document.querySelector("#progress-menu"))};
//# sourceMappingURL=maps/rugBuilder.min.js.map
