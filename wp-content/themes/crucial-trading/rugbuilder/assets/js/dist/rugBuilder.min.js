"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),RugBuilder=function(){function e(t){_classCallCheck(this,e),this.context=t,this.materials=[],this.collections={},this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.currentStage=0,this.stages=["center","borderType","innerBorder","outerBorder","size"],this.stageVisited=[!0,!1,!1,!1,!1],this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.cameraOptions={aspectRatio:this.screenWidth/this.screenHeight,far:1e3,near:.1,viewAngle:90},this.helpers={axis:void 0,grid:void 0,spotLight:void 0},this.lights={ambientLight:void 0,directionalLight:void 0,spotLight:void 0},this.center=void 0,this.json={single:{borderEast:void 0,borderNorth:void 0,borderSouth:void 0,borderWest:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0},piping:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0}},this.centerMaterial=void 0,this.loadedTextures={},this.materialChoice={single:{border:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0},piping:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0}},this.reactComponents={}}return _createClass(e,[{key:"nextStage",value:function(){var e=this.currentStage+1;if(e>4)throw new Error("Cannot go higher than stage 4");this.stageVisited[e]||(this.stageVisited[e]=!0),this.currentStage=e}},{key:"prevStage",value:function(){var e=this.currentStage-1;if(e<0)throw new Error("Cannot go lower than stage 0");this.currentStage=e}},{key:"updateStage",value:function(e){if(e<0||e>4)throw new Error("Stage must not be less than 0 or greater than 4");var t=!1;this.currentStage+1===e?t=!0:this.stageVisited[e]?t=!0:this.stageVisited[e-1]&&(t=!0),t&&(this.currentStage=e)}},{key:"startAgain",value:function(){this.currentStage=0,this.stageVisited=[!0,!1,!1,!1,!1],this.json={single:{borderEast:void 0,borderNorth:void 0,borderSouth:void 0,borderWest:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0},piping:{center:void 0,innerBorderEast:void 0,innerBorderNorth:void 0,innerBorderSouth:void 0,innerBorderWest:void 0,outerBorderEast:void 0,outerBorderNorth:void 0,outerBorderSouth:void 0,outerBorderWest:void 0,stitches:void 0}},this.centerMaterial=void 0,this.loadedTextures={},this.materialChoice={single:{border:void 0,center:void 0,stitches:void 0},double:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0},piping:{center:void 0,innerBorder:void 0,outerBorder:void 0,stitches:void 0}}}}]),e}();RugBuilder.prototype.start=function(){function e(){var e=a.btnExitComponent(),t=a.btnRestartComponent(),r=a.btnStageComponent();a.menuComponent(e,t,r);var o=a.btnExpandCollapseComponent(),n=a.btnMaterialComponent(),i=a.btnCollectionComponent(),c=a.btnSwatchComponent(),s=a.sideMenuComponent();a.drawerComponent(o,n,i,c,s)}function t(e){var t=void 0;switch(e){case 0:t="materials";break;case 1:t="collections"}var a="Error at "+t+" stage.";alert(a)}var a=rugBuilder;a.getMaterialsData().then(function(){return a.getCollectionsData()}).then(function(){e()}).catch(function(e){t(e)})},RugBuilder.prototype.getMaterialsData=function(){return new Promise(function(e,t){var a=rugBuilder,r=a.context;!function(){switch(r){case"website":var o=function(){200!==this.status&&t(0),a.materials=JSON.parse(this.response),e(!0)},n=function(){var e=new XMLHttpRequest;e.addEventListener("load",o),e.open("GET","http://localhost:8888/crucial-trading/rugbuilder/?request=materials"),e.send()};n()}}()})},RugBuilder.prototype.getCollectionsData=function(){return new Promise(function(e,t){var a=rugBuilder,r=a.context;!function(){switch(r){case"website":var o=function(){200!==this.status&&t(1),a.collections=JSON.parse(this.response),e(!0)},n=function(){var e=new XMLHttpRequest;e.addEventListener("load",o),e.open("GET","http://localhost:8888/crucial-trading/rugbuilder/?request=collections"),e.send()};n()}}()})},RugBuilder.prototype.getSwatchData=function(e){return new Promise(function(t,a){var r=rugBuilder,o=r.context;!function(){switch(o){case"website":var n=function(){200!==this.status&&a(0),r.swatches=JSON.parse(this.response),t(JSON.parse(this.response))},i=function(){var t=new XMLHttpRequest;t.addEventListener("load",n),t.open("GET","http://localhost:8888/crucial-trading/rugbuilder/?request=swatches&collection="+e),t.send()};i()}}()})},RugBuilder.prototype.btnCollectionComponent=function(){var e=React.createClass({displayName:"BtnCollectionComponent",handleClick:function(){this.props.updateContent("swatches"),this.props.onUpdate(this.props.collection.replace(/ /g,""))},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("h3",null,this.props.collection)))}});return e},RugBuilder.prototype.btnExpandCollapseComponent=function(){var e=React.createClass({displayName:"BtnExpandCollapseComponent",handleClick:function(){this.props.currentState.open?this.props.onUpdate(!0):this.props.onUpdate(!1)},render:function(){return React.createElement("a",{href:"#",className:"expCol",onClick:this.handleClick},this.props.currentState.text)}});return e},RugBuilder.prototype.btnMaterialComponent=function(){var e=(rugBuilder,React.createClass({displayName:"BtnMaterialComponent",handleClick:function(){this.props.updateContent("collections"),this.props.updateMaterial(this.props.material)},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:this.props.thumb,alt:this.props.material}),React.createElement("h3",null,this.props.material)))}}));return e},RugBuilder.prototype.btnSwatchComponent=function(){var e=React.createClass({displayName:"BtnSwatchComponent",handleClick:function(){this.props.updateContent("swatchesSelected"),this.props.onUpdate(this.props.swatch.replace(/ /g,""))},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},this.props.swatch))}});return e},RugBuilder.prototype.drawerComponent=function(e,t,a,r,o){var n=rugBuilder,i=React.createClass({displayName:"DrawerComponent",getInitialState:function(){var e=n.materials,t=n.collections;return{content:"materials",open:!1,text:"Expand",chosenMaterial:"Wool",chosenCollection:void 0,chosenSwatch:void 0,_materials:e,_collections:t,_swatches:{}}},placeholderData:{swatches:{SisalCollection1:["Sisal 1 Swatch 1","Sisal 1 Swatch 2","Sisal 1 Swatch 3","Sisal 1 Swatch 4","Sisal 1 Swatch 5","Sisal 1 Swatch 6","Sisal 1 Swatch 7","Sisal 1 Swatch 8","Sisal 1 Swatch 9","Sisal 1 Swatch 10"],SisalCollection2:["Sisal 2 Swatch 1","Sisal 2 Swatch 2","Sisal 2 Swatch 3","Sisal 2 Swatch 4","Sisal 2 Swatch 5","Sisal 2 Swatch 6","Sisal 2 Swatch 7","Sisal 2 Swatch 8","Sisal 2 Swatch 9","Sisal 2 Swatch 10"],WoolCollection1:["Wool 1 Swatch 1","Wool 1 Swatch 2","Wool 1 Swatch 3","Wool 1 Swatch 4","Wool 1 Swatch 5","Wool 1 Swatch 6","Wool 1 Swatch 7","Wool 1 Swatch 8","Wool 1 Swatch 9","Wool 1 Swatch 10"],WoolCollection2:["Wool 2 Swatch 1","Wool 2 Swatch 2","Wool 2 Swatch 1","Wool 2 Swatch 2","Wool 2 Swatch 1","Wool 2 Swatch 2","Wool 2 Swatch 1","Wool 2 Swatch 2","Wool 2 Swatch 1","Wool 2 Swatch 2"],SisoolCollection1:["Sisool 1 Swatch 1","Sisool 1 Swatch 2","Sisool 1 Swatch 3","Sisool 1 Swatch 4","Sisool 1 Swatch 5","Sisool 1 Swatch 6","Sisool 1 Swatch 7","Sisool 1 Swatch 8","Sisool 1 Swatch 9","Sisool 1 Swatch 10"],SisoolCollection2:["Sisool 2 Swatch 1","Sisool 2 Swatch 2","Sisool 2 Swatch 3","Sisool 2 Swatch 4","Sisool 2 Swatch 5","Sisool 2 Swatch 6","Sisool 2 Swatch 7","Sisool 2 Swatch 8","Sisool 2 Swatch 9","Sisool 2 Swatch 10"],CoirCollection1:["Coir 1 Swatch 1","Coir 1 Swatch 2","Coir 1 Swatch 3","Coir 1 Swatch 4","Coir 1 Swatch 5","Coir 1 Swatch 6","Coir 1 Swatch 7","Coir 1 Swatch 8","Coir 1 Swatch 9","Coir 1 Swatch 10"],CoirCollection2:["Coir 2 Swatch 1","Coir 2 Swatch 2","Coir 2 Swatch 3","Coir 2 Swatch 4","Coir 2 Swatch 5","Coir 2 Swatch 6","Coir 2 Swatch 7","Coir 2 Swatch 8","Coir 2 Swatch 9","Coir 2 Swatch 10"],SeagrassCollection1:["Seagrass 1 Swatch 1","Seagrass 1 Swatch 2","Seagrass 1 Swatch 3","Seagrass 1 Swatch 4","Seagrass 1 Swatch 5","Seagrass 1 Swatch 6","Seagrass 1 Swatch 7","Seagrass 1 Swatch 8","Seagrass 1 Swatch 9","Seagrass 1 Swatch 10"],SeagrassCollection2:["Seagrass 2 Swatch 1","Seagrass 2 Swatch 2","Seagrass 2 Swatch 3","Seagrass 2 Swatch 4","Seagrass 2 Swatch 5","Seagrass 2 Swatch 6","Seagrass 2 Swatch 7","Seagrass 2 Swatch 8","Seagrass 2 Swatch 9","Seagrass 2 Swatch 10"],JuteCollection1:["Jute 1 Swatch 1","Jute 1 Swatch 2","Jute 1 Swatch 3","Jute 1 Swatch 4","Jute 1 Swatch 5","Jute 1 Swatch 6","Jute 1 Swatch 7","Jute 1 Swatch 8","Jute 1 Swatch 9","Jute 1 Swatch 10"],JuteCollection2:["Jute 2 Swatch 1","Jute 2 Swatch 2","Jute 2 Swatch 3","Jute 2 Swatch 4","Jute 2 Swatch 5","Jute 2 Swatch 6","Jute 2 Swatch 7","Jute 2 Swatch 8","Jute 2 Swatch 9","Jute 2 Swatch 10"]}},updateOpenState:function(e){e?this.setState({open:!1,text:"Expand"}):this.setState({open:!0,text:"Collapse"})},updateContentState:function(e){this.setState({content:e})},updateMaterialChoice:function(e){this.setState({chosenMaterial:e,chosenCollection:void 0})},updateCollectionChoice:function(e){var t=this;this.setState({chosenCollection:e}),n.getSwatchData(e).then(function(a){t.state._swatches[e]=a,t.forceUpdate()})},updateSwatchChoice:function(e){this.setState({chosenSwatch:e})},render:function(){var n=this,i=function(){var e=n.state._materials;if("materials"===n.state.content)return e.map(function(e,a){return React.createElement(t,{key:a,index:a,material:e.name,thumb:e.thumb,updateContent:n.updateContentState,updateMaterial:n.updateMaterialChoice,chosenMaterial:n.state.chosenMaterial})})},c=function(e){var t=n.state._materials;return"collections"===n.state.content&&"collections"===e?t.map(function(e,t){return React.createElement(o,{key:t,material:e.name,thumb:e.thumb,onUpdate:n.updateMaterialChoice})}):"swatches"===n.state.content&&"swatches"===e?t.map(function(e,t){return React.createElement(o,{key:t,material:e.name,thumb:e.thumb,updateContent:n.updateContentState,onUpdate:n.updateMaterialChoice})}):"swatchesSelected"===n.state.content&&"swatches--selected"===e?React.createElement(o,{material:n.state.chosenMaterial}):void 0},s=function(){var e=n.state._collections,t=e[n.state.chosenMaterial];if("collections"===n.state.content)return t.map(function(e,t){return React.createElement(a,{key:t,collection:e.name,updateContent:n.updateContentState,onUpdate:n.updateCollectionChoice})})},l=function(e){var t=n.state._swatches,a=t[n.state.chosenCollection];if("swatches"===n.state.content&&"swatches"===e&&void 0!==a)return Object.keys(a).map(function(e,t){var o=a[e],i=o.name,c=o.code,s=o.thumb;return React.createElement(r,{key:t,swatch:i,thumb:s,code:c,updateContent:n.updateContentState,onUpdate:n.updateSwatchChoice})});if("swatchesSelected"===n.state.content&&"swatches--selected"===e){var o=n.state.chosenSwatch,i=o.length,c=o.substr(i-1,1),s=c-1,l=[];if(s>1)for(var h=s-2;h<s+3;h++){var u=h===s?" tick":"";l.push(t[n.state.chosenCollection][h]+u)}else{for(var d=0;d<s;d++)l.push(t[n.state.chosenCollection][d]);l.push(t[n.state.chosenCollection][s]+" (tick)");for(var S=s+1;S<5;S++)l.push(t[n.state.chosenCollection][S])}return l.map(function(e,t){return React.createElement(r,{key:t,swatch:e})})}},h=function(){if("border"===n.state.content)return React.createElement("p",null,"abc")},u=n.state.open?"open":"closed",d="drawer__content "+u+" "+this.state.content;return React.createElement("div",{className:"react-container drawer__container"},React.createElement("div",{className:d},React.createElement("div",{className:"drawer__content__material"},React.createElement("ul",null,i())),React.createElement("div",{className:"drawer__content__collections clearfix"},React.createElement("div",{className:"drawer__collections__sidebar"},React.createElement("ul",null,c("collections"))),React.createElement("div",{className:"drawer__collections__collections"},React.createElement("ul",{className:"clearfix"},s()))),React.createElement("div",{className:"drawer__content__swatches"},React.createElement("div",{className:"drawer__swatches__sidebar"},React.createElement("ul",null,c("swatches"))),React.createElement("div",{className:"drawer__swatches__swatches"},React.createElement("ul",null,l("swatches")))),React.createElement("div",{className:"drawer__content__swatches--selected"},React.createElement("div",{className:"drawer__swatches--selected__sidebar"},React.createElement("ul",null,c("swatches--selected"))),React.createElement("div",{className:"drawer__swatches--selected__swatches"},React.createElement("ul",null,l("swatches--selected")))),React.createElement("div",{className:"drawer__content__border"},h())),React.createElement(e,{onUpdate:this.updateOpenState,currentState:this.state}))}});ReactDOM.render(React.createElement(i,null),document.querySelector("#drawer"))},RugBuilder.prototype.sideMenuComponent=function(){var e=React.createClass({displayName:"SideMenuComponent",handleClick:function(){this.props.onUpdate(this.props.material),this.props.updateContent&&this.props.updateContent("collections")},render:function(){return React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick},React.createElement("img",{src:this.props.thumb,alt:this.props.material}),React.createElement("h3",null,this.props.material)))}});return e},RugBuilder.prototype.btnExitComponent=function(){var e=React.createClass({displayName:"BtnExitComponent",render:function(){return React.createElement("a",{href:"http://localhost:8888/crucial-trading",className:"progress-menu__exit"},"Exit")}});return e},RugBuilder.prototype.btnRestartComponent=function(){var e=React.createClass({displayName:"BtnRestartComponent",render:function(){return React.createElement("a",{href:"#",className:"progress-menu__restart"},"Start Again")}});return e},RugBuilder.prototype.btnStageComponent=function(){var e=rugBuilder,t=React.createClass({displayName:"BtnStageComponent",getInitialState:function(){return{marginLeft:0}},componentWillMount:function(){this.calcMargin(),window.addEventListener("resize",this.calcMargin)},handleClick:function(){var t=e.currentStage,a=this.props.index;t!==a&&(t+1===a?e.nextStage():t-1===a?e.prevStage():e.updateStage(a))},calcMargin:function(){if(!(this.props.index>0)){var t=window.innerWidth,a=e.currentStage;if(t>768||0===a)return void this.setState({marginLeft:0});var r=5*t*.16,o=t-r,n=o/2,i=r*a-n,c="-"+i+"px";this.setState({marginLeft:c})}},render:function(){var t=e.currentStage,a="";a=this.props.index===t?"active":this.props.index>t?"next":"prev";var r={marginLeft:this.state.marginLeft},o="progress-menu__stage "+a;return React.createElement("li",{className:o,style:r},React.createElement("a",{href:"#",className:"progress-menu__stage__link",onClick:this.handleClick},this.props.stage))}});return t},RugBuilder.prototype.menuComponent=function(e,t,a){var r=React.createClass({displayName:"MenuComponent",render:function(){var r=["Center","Border Type","Inner Border","Outer Border","Rug Size"],o=r.map(function(e,t){return React.createElement(a,{stage:e,key:t,index:t})});return React.createElement("div",{className:"progress-menu__container"},React.createElement("div",{className:"progress-menu__top"},React.createElement("img",{src:"assets/logo.png",alt:"Crucial Trading Rug Builder"}),React.createElement(t,null),React.createElement(e,null)),React.createElement("div",{className:"progress-menu__bottom"},React.createElement("ul",{className:"progress-menu__stages"},o)))}});ReactDOM.render(React.createElement(r,null),document.querySelector("#progress-menu"))};
//# sourceMappingURL=maps/rugBuilder.min.js.map
